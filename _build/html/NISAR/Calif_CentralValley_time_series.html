

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ARIA GUNW (NISAR-like) Data: InSAR Time Series Analysis with MintPy Notebook &#8212; OpenSARLab NISAR Early Adopter Workshop: 2024.1</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=bd9e20870c6007c4c509"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'NISAR/Calif_CentralValley_time_series';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="OPERA Resources" href="../OPERA/OPERA_resources.html" />
    <link rel="prev" title="NISAR Sample Data Notebook" href="NISAR_sample_data.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <header>
  
    <div class="bd-header navbar navbar-expand-lg bd-navbar">
    </div>
  
  </header>

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/ASF_logo.svg" class="logo__image only-light" alt="OpenSARLab NISAR Early Adopter Workshop: 2024.1 - Home"/>
    <script>document.write(`<img src="../_static/ASF_logo.svg" class="logo__image only-dark" alt="OpenSARLab NISAR Early Adopter Workshop: 2024.1 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    NISAR Early Adopter Workshop 2024.1 Jupyter Book
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Workshop Slides</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://docs.google.com/presentation/d/1aXE2_k2QzRtSwQpkssZCbiT2WQ6spSU-Kzj6Ne9wVnk/edit?usp=sharing">NISAR Early Adopter Workshop 1 2024 Slides</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Software Environment</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../environment/build_conda_env.html">Create Conda Environment Notebook</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">NISAR</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="NISAR_resources.html">NISAR Resources</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://nisar.jpl.nasa.gov/">NISAR Website</a></li>
<li class="toctree-l2"><a class="reference external" href="https://asf.alaska.edu/nisar/">ASF NISAR Page</a></li>
<li class="toctree-l2"><a class="reference external" href="https://nisar.jpl.nasa.gov/documents/26/NISAR_FINAL_9-6-19.pdf">NISAR Mission Science Users’ Handbook</a></li>
<li class="toctree-l2"><a class="reference external" href="https://nisar.jpl.nasa.gov/engagement/early-adopters/">NISAR Early Adopters Program</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/isce-framework">isce-framework GitHub Org</a></li>
<li class="toctree-l2"><a class="reference external" href="https://nisar.jpl.nasa.gov/data/sample-data/">NISAR Sample Data Site</a></li>
<li class="toctree-l2"><a class="reference external" href="https://gitlab.com/nisar-science-algorithms/solid-earth/ATBD">NISAR Solid Earth ATBD</a></li>
<li class="toctree-l2"><a class="reference external" href="https://asf.alaska.edu/data-sets/derived-data-sets/sentinel-1-interferograms/">ARIA Sentinel-1 GUNW Information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="NISAR_sample_data.html">NISAR Sample Data Notebook</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">ARIA GUNW (NISAR-like) Data: InSAR Time Series Analysis with MintPy Notebook</a></li>






</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">OPERA</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../OPERA/OPERA_resources.html">OPERA Resources</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://www.jpl.nasa.gov/go/opera">OPERA Website</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/opera-adt">OPERA Algorithm Development Team GitHub Org</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/OPERA-Cal-Val/OPERA_Applications/tree/main">OPERA_Applications Repo (OPERA data recipes)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../OPERA/OPERA_data_access.html">OPERA Data Access</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../OPERA/search_download_OPERA-RTC-S1.html">OPERA RTC-S1 Data Access Notebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../OPERA/search_download_OPERA-CSLC-S1.html">OPERA CSLC-S1 Data Access Notebook</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../OPERA/OPERA_data_recipes.html">OPERA Data Recipes</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../OPERA/OPERA_RTC_timeseries_snow.html">OPERA RTC-S1 Time-Series: Snow Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../OPERA/OPERA-RTC-S1-time_series.html">OPERA RTC-S1 Coefficient of Variation: User Supplied Dataset Notebook</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">ASF HyP3 On-Demand Processing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../HyP3/HyP3_resources.html">ASF Data Search and HyP3 Resources</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://hyp3-docs.asf.alaska.edu/">HyP3 Documentation</a></li>
<li class="toctree-l2"><a class="reference external" href="https://search.asf.alaska.edu/">ASF Data Search (Vertex)</a></li>
<li class="toctree-l2"><a class="reference external" href="https://docs.asf.alaska.edu/vertex/manual/">ASF SAR Data Search User Manual</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/asfadmin/Discovery-asf_search">asf_search Python Package</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/asfadmin/Discovery-asf_search/tree/master/examples">asf_search Programmatic Access Examples</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/ASFHyP3/hyp3-sdk">hyp3_sdk Python Package</a></li>
<li class="toctree-l2"><a class="reference external" href="https://nbviewer.org/github/ASFHyP3/hyp3-sdk/blob/main/docs/sdk_example.ipynb">HyP3 On-Demand Processing, Programmatic Access Example</a></li>
<li class="toctree-l2"><a class="reference external" href="https://storymaps.arcgis.com/stories/2ead3222d2294d1fae1d11d3f98d7c35">RTC On Demand! StoryMap</a></li>
<li class="toctree-l2"><a class="reference external" href="https://storymaps.arcgis.com/stories/68a8a3253900411185ae9eb6bb5283d3">InSAR On Demand! StoryMap</a></li>
<li class="toctree-l2"><a class="reference external" href="https://hyp3-docs.asf.alaska.edu/guides/burst_insar_product_guide/">HyP3 Sentinel-1 Burst InSAR, NOW AVAILABLE!</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../HyP3/HyP3_data_access.html">HyP3 Data Access</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../HyP3/hyp3_insar_permafrost.html">HyP3 On-Demand GAMMA-InSAR, SBAS</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../HyP3/HyP3_data_recipes.html">HyP3 Data Recipes</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://www.youtube.com/watch?v=tq8nZpsWK6k">MintPy SBAS Webinar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../HyP3/MintPy_sbas_permafrost_Alaska.html">Quantifying Permafrost-Related Ground Feformation with InSAR Time Series Using HyP3 Products and MintPy</a></li>







</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Additional Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://asf.alaska.edu/">ASF Website</a></li>
<li class="toctree-l1"><a class="reference external" href="https://opensarlab.asf.alaska.edu/">ASF OpenScienceLab (Jupyter-based Cloud Computing Environments)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/RadarCODE/awesome-sar">awesome-sar GitHub Repo (Directory of SAR resources)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.hdfgroup.org/downloads/hdfview/">HDFView Software</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/insarlab/MintPy">Miami InSAR Time-Series Software in Python (MintPy)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.earthscope.org/event/2023-insar-isce-short-course/">EarthScope InSAR Processing and Analysis (ISCE+) Short Course</a></li>
<li class="toctree-l1"><a class="reference external" href="https://radar.community.uaf.edu/">Microwave Remote Sensing Class Website, in-person and remote, UAF, Dr. Franz Meyer</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.edx.org/learn/data-analysis/university-of-alaska-fairbanks-synthetic-aperture-radar-foundations">SAR Foundations, Online edX class, UAF, Dr. Franz Meyer</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.edx.org/learn/earth-sciences/university-of-alaska-fairbanks-synthetic-aperture-radar-hazards">SAR Hazards, Online edX class, UAF, Dr. Franz Meyer</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.edx.org/learn/ecosystems/university-of-alaska-fairbanks-synthetic-aperture-radar-ecosystems">SAR Ecosystems, Online edX class, UAF, Dr. Franz Meyer</a></li>
<li class="toctree-l1"><a class="reference external" href="https://hyp3-docs.asf.alaska.edu/guides/burst_insar_product_guide/">HyP3 Sentinel-1 Burst InSAR, NOW AVAILABLE!</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FNISAR/Calif_CentralValley_time_series.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/NISAR/Calif_CentralValley_time_series.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>ARIA GUNW (NISAR-like) Data: InSAR Time Series Analysis with MintPy Notebook</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">ARIA GUNW (NISAR-like) Data: InSAR Time Series Analysis with MintPy Notebook</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mapping-subsidence-in-the-california-central-valley-with-insar-time-series">Mapping Subsidence in the California Central Valley with InSAR time series</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#notebook-setup">0. Notebook setup</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#smallbaselineapp-py-overview">1. smallbaselineApp.py overview</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#processing-steps-of-smallbaselineapp-py">1.1 Processing steps of smallbaselineApp.py</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-processing-parameters">1.2 Configuring processing parameters</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#small-baseline-time-series-analysis">2. Small Baseline Time Series Analysis</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-aria-data-into-mintpy">2.1. Loading ARIA data into MintPy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-the-interferogram-network">2.2. Plotting the interferogram network</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mask-generation">2.3.  Mask generation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reference-point">reference_point</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inverting-of-the-small-baseline-network">2.4. Inverting of the Small Baseline network</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#estimating-the-long-term-velocity-rate">2.5. Estimating the long-term velocity rate</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#error-analysis-what-is-signal-what-is-noise">3. Error analysis (what is signal, what is noise!)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quality-of-the-inversion">3.1 Quality of the inversion</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#average-spatial-coherence">3.1.1 Average spatial coherence</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#temporal-coherence">3.1.2 Temporal coherence</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velocity-error-analysis">3.2. Velocity error analysis</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-a-subsidence-transect">4. Plotting a Subsidence Transect</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization">5. Visualization</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#reference-material">Reference material</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="aria-gunw-nisar-like-data-insar-time-series-analysis-with-mintpy-notebook">
<h1>ARIA GUNW (NISAR-like) Data: InSAR Time Series Analysis with MintPy Notebook<a class="headerlink" href="#aria-gunw-nisar-like-data-insar-time-series-analysis-with-mintpy-notebook" title="Permalink to this heading">#</a></h1>
<section id="mapping-subsidence-in-the-california-central-valley-with-insar-time-series">
<h2>Mapping Subsidence in the California Central Valley with InSAR time series<a class="headerlink" href="#mapping-subsidence-in-the-california-central-valley-with-insar-time-series" title="Permalink to this heading">#</a></h2>
<p><strong>Authors:</strong> Eric Fielding, David Bekaert, Heresh Fattahi and Zhang Yunjun</p>
<p>This notebook is a modification by Eric Fielding from the notebook
(<a class="reference external" href="https://opensciencelab.asf.alaska.edu/lab/opensarlab/hub/user-redirect/lab/tree/notebooks/SAR_Training/English/Hazards/LosAngeles_time_series.ipynb">https://opensciencelab.asf.alaska.edu/lab/opensarlab/hub/user-redirect/lab/tree/notebooks/SAR_Training/English/Hazards/LosAngeles_time_series.ipynb</a>)</p>
<p>That Los Angeles time series note was a second modification of the
(<a class="reference external" href="https://opensciencelab.asf.alaska.edu/lab/opensarlab/hub/user-redirect/lab/tree/NISAR_ST_demo/ARIA-tools-docs/JupyterDocs/NISAR/L2_interseismic/mintpySF/smallbaselineApp_aria.ipynb">https://opensciencelab.asf.alaska.edu/lab/opensarlab/hub/user-redirect/lab/tree/NISAR_ST_demo/ARIA-tools-docs/JupyterDocs/NISAR/L2_interseismic/mintpySF/smallbaselineApp_aria.ipynb</a>)
by David Bekaert, Heresh Fattahi and Zhang Yunjun that was originally focused on San Francisco.</p>
<p>This notebook is a modification from the <a class="reference external" href="https://nbviewer.jupyter.org/github/insarlab/MintPy-tutorial/blob/master/smallbaselineApp_aria.ipynb">original</a> by Heresh Fattahi and Zhang Yunjun.</p>
<p>Additional Python code from the NISAR Solid Earth Level 2 science Secular Deformation requirement validation notebook has been added from the <strong>Notebooks for NISAR Solid Earth Algorithm Theoretical Basis Documents</strong>. See <a class="github reference external" href="https://github.com/nisar-solid/ATBD">nisar-solid/ATBD</a> for the full set of notebooks and explanation. We use an example dataset that was prepared for the NISAR validation.</p>
<p><strong>ARIA S1 GUNW</strong></p>
<p>The Caltech-JPL ARIA project in partnership with NASA Getting Ready for NISAR (GRFN) project has been generated surface displacement products (interferograms) mimicking the NISAR L2 GUNW (Geocoded Unwrapped phase interferograms) product formatting. The interferograms are stored at the NASA ASF DAAC, and are accessible with an Open Source set of tools called ARIA-tools. The Miami Insar Timeseries software in PYthon (MintPy), an open-source package for InSAR time-series analysis, is compatible with the outputs from the ARIA-tools package, and in combination with the ARIA-tools pre-processor can be used to estimate ground displacement time-series.</p>
<p>The Jupyter notebook presented here is meant as an practical example on the use of Jupyter for exploring landslide displacements. In the example below, we will demonstrate a time-series derived from ARIA standard InSAR products over the southern Central Valley of California, also called the San Joaquin Valley revealing rapid subsidence due to large amounts of groundwater withdrawal.</p>
<p>See the other tutorials on ARIA-tools to learn more about how to use that package.</p>
<div class="alert alert-warning">
<b>To save time, we have pre-ran the ARIA-tools pacakge and data loading into MintPy</b> 
<p>!<a class="reference external" href="http://ariaDownload.py">ariaDownload.py</a> -b ‘36.18 36.26 -119.91 -119.77’ –track 144 -s 20180101 -e 20190101</p>
<p>!!<a class="reference external" href="http://ariaTSsetup.py">ariaTSsetup.py</a> -f ‘products/*.nc’ -b ‘35.77 36.75 -120.61 -118.06’  –mask Download</p>
<p>!<a class="reference external" href="http://smallbaselineApp.py">smallbaselineApp.py</a> -t Central_Valley.cfg –dostep load_data</p>
</div>
<div class="alert alert-warning">
<p><b>The staged data was uploaded in S3 data bucket of openSARlab and can be downloaded using:</b></p>
<p>!aws s3 cp ss3://asf-jupyter-data-west/NISAR_SE/CentralValleyA144.zip CentralValleyA144.zip</p>
<p>This data should be available from openSARlabs or other computer systems as long as the AWS command line tools are installed to download from S3.</p>
</div></section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="notebook-setup">
<h1>0. Notebook setup<a class="headerlink" href="#notebook-setup" title="Permalink to this heading">#</a></h1>
<p>The cell below is required to be ran each time the notebook is started and ensures correct set-up of the notebook.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">subprocess</span>

<span class="c1"># define the work Top directory</span>
<span class="n">worktop_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Top directory: &quot;</span><span class="p">,</span> <span class="n">worktop_dir</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">worktop_dir</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">worktop_dir</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Create directory: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">worktop_dir</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Go to work directory: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">worktop_dir</span><span class="p">))</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">worktop_dir</span><span class="p">)</span>  
    
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;font.size&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">})</span>

<span class="c1"># utils function to create the MintPy analysis configuration file</span>
<span class="k">def</span> <span class="nf">write_config_file</span><span class="p">(</span><span class="n">out_file</span><span class="p">,</span> <span class="n">CONFIG_TXT</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">):</span> 
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write configuration files for MintPy to process ARIA sample products&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span> <span class="ow">or</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;w&#39;</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">CONFIG_TXT</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;write configuration to file: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_file</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_file</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">CONFIG_TXT</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;add the following to file: </span><span class="se">\n</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">CONFIG_TXT</span><span class="p">))</span>

 
<span class="c1"># verify if mintpy install is version 1.3.2 and older:</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">mintpy</span> <span class="kn">import</span> <span class="n">view</span><span class="p">,</span> <span class="n">tsview</span><span class="p">,</span> <span class="n">plot_network</span><span class="p">,</span> <span class="n">plot_transection</span><span class="p">,</span> <span class="n">plot_coherence_matrix</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Looks like mintPy 1.3.x is not installed&quot;</span><span class="p">)</span>
    
<span class="c1"># verify if mintpy install is version 1.5 and newer:</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">mintpy.utils</span> <span class="kn">import</span> <span class="n">readfile</span><span class="p">,</span> <span class="n">utils</span> <span class="k">as</span> <span class="n">ut</span><span class="p">,</span> <span class="n">plot</span> <span class="k">as</span> <span class="n">pp</span>
    <span class="kn">from</span> <span class="nn">mintpy.cli</span> <span class="kn">import</span> <span class="n">view</span><span class="p">,</span> <span class="n">tsview</span><span class="p">,</span> <span class="n">plot_network</span><span class="p">,</span> <span class="n">plot_transection</span>
    <span class="kn">from</span> <span class="nn">mintpy.view</span> <span class="kn">import</span> <span class="n">prep_slice</span><span class="p">,</span> <span class="n">plot_slice</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Looks like mintPy 1.5.x is not completely installed&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Top directory:  /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR
Go to work directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR
</pre></div>
</div>
</div>
</div>
<p>To save time for this demonstration, we will use a staged (pre-processed and saved online) dataset from the NISAR Solid Earth Science Team covering an area of the Central Valley</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Choose a site and track direction</span>
<span class="c1"># Available NISAR Solid Earth secular displacement validation sites are: </span>
<span class="c1"># [&#39;RidgecrestA64&#39;,&#39;MojaveD173&#39;,&#39;MojaveD173_3year&#39;,&#39;CentralValleyA144&#39;]</span>
<span class="c1"># We use the CentralValleyA144 site in the Central Valley for this demonstration</span>

<span class="n">site</span><span class="o">=</span><span class="s1">&#39;CentralValleyA144&#39;</span>  
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">################# Set Directories ##########################################</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Current directory:&#39;</span><span class="p">,</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>

<span class="k">if</span> <span class="s1">&#39;work_dir&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">():</span>
    <span class="n">work_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="o">/</span><span class="s1">&#39;work&#39;</span><span class="o">/</span><span class="n">site</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Work directory:&quot;</span><span class="p">,</span> <span class="n">work_dir</span><span class="p">)</span>
<span class="n">work_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Change to Workdir</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">work_dir</span><span class="p">)</span>

<span class="n">gunw_dir</span> <span class="o">=</span> <span class="n">work_dir</span><span class="o">/</span><span class="s1">&#39;products&#39;</span>
<span class="n">gunw_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   GUNW    dir:&quot;</span><span class="p">,</span> <span class="n">gunw_dir</span><span class="p">)</span> 

<span class="n">mintpy_dir</span> <span class="o">=</span> <span class="n">work_dir</span><span class="o">/</span><span class="s1">&#39;MintPy&#39;</span> 
<span class="n">mintpy_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   MintPy  dir:&quot;</span><span class="p">,</span> <span class="n">mintpy_dir</span><span class="p">)</span>
<span class="c1">### Change to MintPy workdir</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">mintpy_dir</span><span class="p">)</span>
<span class="n">vel_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mintpy_dir</span><span class="p">,</span> <span class="s1">&#39;velocity.h5&#39;</span><span class="p">)</span>
<span class="n">msk_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mintpy_dir</span><span class="p">,</span> <span class="s1">&#39;maskConnComp.h5&#39;</span><span class="p">)</span>  <span class="c1"># maskTempCoh.h5 maskConnComp.h5</span>
<span class="c1">############################################################################</span>
<span class="c1">### List of CalVal Sites:</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Set NISAR calval sites:</span>
<span class="sd">    CentralValleyA144  : Central Valley track 144</span>
<span class="sd">    OklahomaA107       : Oklahoma</span>
<span class="sd">    PuertoRicoD98      : Puerto Rico (Earthquake M6.4 on 20200107) - Descending track </span>
<span class="sd">    PuertoRicoA135     : Puerto Rico (Earthquake M6.4 on 20200107 &amp; large aftershock on 20200703) - Ascending track</span>
<span class="sd">    RidgecrestD71      : Ridgecrest  (Earthquake M7.2 on 20190705) - Descending track</span>
<span class="sd">    RidgecrestA64      : Ridgecrest  (Earthquake M7.2 on 20190705) - Ascending track</span>
<span class="sd">    MojaveD173         : Mojave desert (Ridgecrest Earthquake M7.2 on 20190705) - Descending track</span>
<span class="sd">    MojaveD173_3year   : Mojave desert (Ridgecrest Earthquake M7.2 on 20190705) - Descending track</span>

<span class="sd">ARIA &amp; MintPy parameters:</span>
<span class="sd">    calval_location : name</span>
<span class="sd">    download_region : download box in S,N,W,E format</span>
<span class="sd">    analysis_region : analysis box in S,N,W,E format (must be within download_region)</span>
<span class="sd">    reference_lalo : latitute,longitude in geographic coordinates (default: auto)</span>
<span class="sd">    download_start_date : download start date as YYYMMDD  </span>
<span class="sd">    download_end_date   : download end date as YYYMMDD</span>
<span class="sd">    earthquakeDate :  arbitrary date for testing with the central_valley dataset</span>
<span class="sd">    sentinel_track : sentinel track to download</span>
<span class="sd">    gps_ref_site_name : Name of the GPS site for InSAR re-referencing</span>
<span class="sd">    tempBaseMax&#39; : maximum number of days, &#39;don&#39;t use interferograms longer than this value </span>
<span class="sd">    ifgExcludeList : default is not to exclude any interferograms</span>
<span class="sd">    maskWater&#39; :  interior locations don&#39;t need to mask water</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="n">sites</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">##########  CENTRAL VALLEY ##############</span>
    <span class="s1">&#39;CentralValleyA144&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;calval_location&#39;</span> <span class="p">:</span> <span class="s1">&#39;Central_Valley&#39;</span><span class="p">,</span>
            <span class="s1">&#39;download_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;36.18 36.26 -119.91 -119.77&quot;&#39;</span><span class="p">,</span> <span class="c1"># download box in S,N,W,E format</span>
            <span class="s1">&#39;analysis_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;35.77 36.75 -120.61 -118.06&quot;&#39;</span><span class="p">,</span> <span class="c1"># analysis box in S,N,W,E format (must be within download_region)</span>
            <span class="s1">&#39;reference_lalo&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
            <span class="s1">&#39;download_start_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20180101&#39;</span><span class="p">,</span>
            <span class="s1">&#39;download_end_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20190101&#39;</span><span class="p">,</span>
            <span class="s1">&#39;earthquakeDate&#39;</span> <span class="p">:</span> <span class="s1">&#39;20180412&#39;</span><span class="p">,</span>                       <span class="c1"># arbitrary date for testing with the central_valley dataset</span>
            <span class="s1">&#39;sentinel_track&#39;</span> <span class="p">:</span> <span class="s1">&#39;144&#39;</span><span class="p">,</span>
            <span class="s1">&#39;gps_ref_site_name&#39;</span> <span class="p">:</span> <span class="s1">&#39;CAWO&#39;</span><span class="p">,</span>
            <span class="s1">&#39;tempBaseMax&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
            <span class="s1">&#39;ifgExcludeList&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
            <span class="s1">&#39;maskWater&#39;</span> <span class="p">:</span> <span class="kc">False</span><span class="p">},</span>                       <span class="c1"># reference site for this area</span>
    <span class="c1">##########  OKLAHOMA ##############</span>
    <span class="s1">&#39;OklahomaA107&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;calval_location&#39;</span> <span class="p">:</span> <span class="s1">&#39;Oklahoma&#39;</span><span class="p">,</span>
            <span class="s1">&#39;download_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;31.7 37.4 -103.3 -93.5&quot;&#39;</span><span class="p">,</span>      <span class="c1"># download box in S,N,W,E format</span>
            <span class="s1">&#39;analysis_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;35.25 36.5 -100.5 -98.5&quot;&#39;</span><span class="p">,</span>     <span class="c1"># analysis box in S,N,W,E format (must be within download_region)</span>
            <span class="s1">&#39;reference_lalo&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
            <span class="s1">&#39;download_start_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20210101&#39;</span><span class="p">,</span>
            <span class="s1">&#39;download_end_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20210801&#39;</span><span class="p">,</span>
            <span class="s1">&#39;earthquakeDate&#39;</span> <span class="p">:</span> <span class="s1">&#39;20210328&#39;</span><span class="p">,</span>                       <span class="c1"># arbitrary date for testing with the Oklahoma dataset</span>
            <span class="s1">&#39;sentinel_track&#39;</span> <span class="p">:</span> <span class="s1">&#39;107&#39;</span><span class="p">,</span>
            <span class="s1">&#39;gps_ref_site_name&#39;</span> <span class="p">:</span> <span class="s1">&#39;OKCL&#39;</span><span class="p">,</span>
            <span class="s1">&#39;tempBaseMax&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
            <span class="s1">&#39;ifgExcludeList&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
            <span class="s1">&#39;maskWater&#39;</span> <span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
    <span class="c1">##########  PUERTO RICO ##############</span>
    <span class="s1">&#39;PuertoRicoD98&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;calval_location&#39;</span> <span class="p">:</span> <span class="s1">&#39;PuertoRicoDesc&#39;</span><span class="p">,</span>
            <span class="s1">&#39;download_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;17.5 18.9 -67.5 -66.0&quot;&#39;</span><span class="p">,</span>       <span class="c1"># download box in S,N,W,E format</span>
            <span class="s1">&#39;analysis_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;17.9 18.5 -67.3 -66.2&quot;&#39;</span><span class="p">,</span>       <span class="c1"># analysis box in S,N,W,E format (must be within download_region)</span>
            <span class="s1">&#39;reference_lalo&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
            <span class="s1">&#39;download_start_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20190701&#39;</span><span class="p">,</span>
            <span class="s1">&#39;download_end_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20200930&#39;</span><span class="p">,</span>
            <span class="s1">&#39;earthquakeDate&#39;</span> <span class="p">:</span> <span class="s1">&#39;20200107&#39;</span><span class="p">,</span>                       <span class="c1"># date of M6.4 quake</span>
            <span class="s1">&#39;sentinel_track&#39;</span> <span class="p">:</span> <span class="s1">&#39;98&#39;</span><span class="p">,</span>                             <span class="c1"># descending track</span>
            <span class="s1">&#39;gps_ref_site_name&#39;</span> <span class="p">:</span> <span class="s1">&#39;PRLT&#39;</span><span class="p">,</span>
            <span class="s1">&#39;tempBaseMax&#39;</span> <span class="p">:</span> <span class="mi">24</span><span class="p">,</span>                                  <span class="c1"># don&#39;t use interferograms longer than 24 days</span>
            <span class="s1">&#39;ifgExcludeList&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;maskWater&#39;</span> <span class="p">:</span> <span class="kc">True</span><span class="p">},</span>                                 <span class="c1"># need to mask ocean around Puerto Rico island</span>
    <span class="s1">&#39;PuertoRicoA135&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;calval_location&#39;</span> <span class="p">:</span> <span class="s1">&#39;PuertoRicoAsc&#39;</span><span class="p">,</span>
             <span class="s1">&#39;download_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;17.5 18.9 -67.5 -66.0&quot;&#39;</span><span class="p">,</span>      <span class="c1"># download box in S,N,W,E format</span>
             <span class="s1">&#39;analysis_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;17.9 18.5 -67.3 -66.2&quot;&#39;</span><span class="p">,</span>      <span class="c1"># analysis box in S,N,W,E format (must be within download_region)</span>
             <span class="s1">&#39;reference_lalo&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
             <span class="s1">&#39;download_start_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20190701&#39;</span><span class="p">,</span>
             <span class="s1">&#39;download_end_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20200930&#39;</span><span class="p">,</span>
             <span class="s1">&#39;earthquakeDate&#39;</span> <span class="p">:</span> <span class="s1">&#39;20200107&#39;</span><span class="p">,</span>                      <span class="c1"># date of M6.4 quake</span>
             <span class="s1">&#39;earthquakeDate2&#39;</span> <span class="p">:</span> <span class="s1">&#39;20200703&#39;</span><span class="p">,</span>                     <span class="c1"># date of large aftershock</span>
             <span class="s1">&#39;sentinel_track&#39;</span> <span class="p">:</span> <span class="s1">&#39;135&#39;</span><span class="p">,</span>                           <span class="c1"># ascending track</span>
             <span class="s1">&#39;gps_ref_site_name&#39;</span> <span class="p">:</span> <span class="s1">&#39;PRLT&#39;</span><span class="p">,</span>
             <span class="s1">&#39;tempBaseMax&#39;</span> <span class="p">:</span> <span class="mi">24</span><span class="p">,</span>                                 <span class="c1"># don&#39;t use interferograms longer than 24 days</span>
             <span class="s1">&#39;ifgExcludeList&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
             <span class="s1">&#39;maskWater&#39;</span> <span class="p">:</span> <span class="kc">True</span><span class="p">},</span>                                <span class="c1"># need to mask ocean around Puerto Rico island</span>
    <span class="c1">##########  RIDGECREST ##############</span>
    <span class="s1">&#39;RidgecrestD71&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;calval_location&#39;</span> <span class="p">:</span> <span class="s1">&#39;RidgecrestD71&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;download_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;34.5 37.5 -119.0 -116.0&quot;&#39;</span><span class="p">,</span> <span class="c1"># download box in S,N,W,E format</span>
                      <span class="s1">&#39;analysis_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;34.7 37.2 -118.9 -116.1&quot;&#39;</span><span class="p">,</span> <span class="c1"># analysis box in S,N,W,E format (must be within download_region)</span>
                      <span class="s1">&#39;reference_lalo&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;download_start_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20190601&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;download_end_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20190831&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;earthquakeDate&#39;</span> <span class="p">:</span> <span class="s1">&#39;20190705&#39;</span><span class="p">,</span>                   <span class="c1"># M7.2 quake date at Ridgecrest</span>
                      <span class="s1">&#39;sentinel_track&#39;</span> <span class="p">:</span> <span class="s1">&#39;71&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;gps_ref_site_name&#39;</span> <span class="p">:</span> <span class="s1">&#39;ISLK&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;tempBaseMax&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;ifgExcludeList&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;maskWater&#39;</span> <span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
    <span class="s1">&#39;RidgecrestA64&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;calval_location&#39;</span> <span class="p">:</span> <span class="s1">&#39;RidgecrestA64&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;download_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;34.5 37.5 -119.0 -116.0&quot;&#39;</span><span class="p">,</span> <span class="c1"># download box in S,N,W,E format</span>
                      <span class="s1">&#39;analysis_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;34.7 37.2 -118.9 -116.1&quot;&#39;</span><span class="p">,</span> <span class="c1"># analysis box in S,N,W,E format (must be within download_region)</span>
                      <span class="s1">&#39;reference_lalo&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;download_start_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20190101&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;download_end_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20190701&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;earthquakeDate&#39;</span> <span class="p">:</span> <span class="s1">&#39;20190705&#39;</span><span class="p">,</span>                   <span class="c1"># M7.2 quake date at Ridgecrest</span>
                      <span class="s1">&#39;sentinel_track&#39;</span> <span class="p">:</span> <span class="s1">&#39;64&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;gps_ref_site_name&#39;</span> <span class="p">:</span> <span class="s1">&#39;ISLK&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;tempBaseMax&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;ifgExcludeList&#39;</span> <span class="p">:</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>   <span class="c1"># list of bad ifgs to exclude from time-series analysis</span>
                      <span class="s1">&#39;maskWater&#39;</span> <span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
    <span class="c1">##########  MOJAVE ##############</span>
    <span class="s1">&#39;MojaveD173&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;calval_location&#39;</span> <span class="p">:</span> <span class="s1">&#39;MojaveD173&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;download_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;34.5 35.6 -116.62 -114.39&quot;&#39;</span><span class="p">,</span> <span class="c1"># download box in S,N,W,E format</span>
                      <span class="s1">&#39;analysis_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;34.66 35.60 -116.62 -114.39&quot;&#39;</span><span class="p">,</span> <span class="c1"># analysis box in S,N,W,E format (must be within download_region)</span>
                      <span class="s1">&#39;reference_lalo&#39;</span> <span class="p">:</span> <span class="s1">&#39;35.20495,-115.81229&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;download_start_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20180101&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;download_end_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20181231&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;earthquakeDate&#39;</span> <span class="p">:</span> <span class="s1">&#39;20190705&#39;</span><span class="p">,</span>                   <span class="c1"># M7.2 quake date at Ridgecrest</span>
                      <span class="s1">&#39;sentinel_track&#39;</span> <span class="p">:</span> <span class="s1">&#39;173&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;gps_ref_site_name&#39;</span> <span class="p">:</span> <span class="s1">&#39;P619&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;tempBaseMax&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;ifgExcludeList&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;maskWater&#39;</span> <span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
    <span class="s1">&#39;MojaveD173_3year&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;calval_location&#39;</span> <span class="p">:</span> <span class="s1">&#39;MojaveD173_3year&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;download_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;34.5 35.6 -116.62 -114.39&quot;&#39;</span><span class="p">,</span> <span class="c1"># download box in S,N,W,E format</span>
                      <span class="s1">&#39;analysis_region&#39;</span> <span class="p">:</span> <span class="s1">&#39;&quot;34.66 35.60 -116.62 -114.39&quot;&#39;</span><span class="p">,</span> <span class="c1"># analysis box in S,N,W,E format (must be within download_region)</span>
                      <span class="s1">&#39;reference_lalo&#39;</span> <span class="p">:</span> <span class="s1">&#39;35.20495,-115.81229&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;download_start_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20160101&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;download_end_date&#39;</span> <span class="p">:</span> <span class="s1">&#39;20181231&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;earthquakeDate&#39;</span> <span class="p">:</span> <span class="s1">&#39;20190705&#39;</span><span class="p">,</span>                   <span class="c1"># M7.2 quake date at Ridgecrest</span>
                      <span class="s1">&#39;sentinel_track&#39;</span> <span class="p">:</span> <span class="s1">&#39;173&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;gps_ref_site_name&#39;</span> <span class="p">:</span> <span class="s1">&#39;P619&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;tempBaseMax&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;ifgExcludeList&#39;</span> <span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;maskWater&#39;</span> <span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># only the following four sites have the pre-processed data staged with a zip file</span>
<span class="n">secular_available_sites</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;RidgecrestA64&#39;</span><span class="p">,</span><span class="s1">&#39;MojaveD173&#39;</span><span class="p">,</span><span class="s1">&#39;MojaveD173_3year&#39;</span><span class="p">,</span><span class="s1">&#39;CentralValleyA144&#39;</span><span class="p">]</span>

<span class="c1"># the following checks whether the site is available. </span>
<span class="c1"># You can comment out this check if you want to run another site and do your own ARIA-tools download</span>
<span class="k">if</span> <span class="n">site</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">secular_available_sites</span><span class="p">:</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Selected site not available! Please select one of the following sites:: </span><span class="se">\n</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">secular_available_sites</span><span class="p">)</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Selected site: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">site</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">sites</span><span class="p">[</span><span class="n">site</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   &#39;</span><span class="o">+</span> <span class="n">key</span><span class="p">,</span> <span class="s1">&#39; : &#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Current directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR
Work directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144
   GUNW    dir: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/products
   MintPy  dir: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy

Selected site: CentralValleyA144
   calval_location  :  Central_Valley
   download_region  :  &quot;36.18 36.26 -119.91 -119.77&quot;
   analysis_region  :  &quot;35.77 36.75 -120.61 -118.06&quot;
   reference_lalo  :  auto
   download_start_date  :  20180101
   download_end_date  :  20190101
   earthquakeDate  :  20180412
   sentinel_track  :  144
   gps_ref_site_name  :  CAWO
   tempBaseMax  :  auto
   ifgExcludeList  :  auto
   maskWater  :  False
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># option to control the use of pre-staged data; [False/True]</span>
<span class="n">Use_Staged_Data</span> <span class="o">=</span> <span class="kc">True</span>
     
<span class="c1">######### DO NOT CHANGE LINES BELOW ########</span>

<span class="k">if</span> <span class="n">Use_Staged_Data</span><span class="p">:</span>
     <span class="c1"># Check if a stage file from S3 already exist, if not try and download it</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;MintPy/inputs/*.h5&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">work_dir</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">zip_name</span> <span class="o">=</span> <span class="n">site</span> <span class="o">+</span> <span class="s1">&#39;.zip&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Downloading:&#39;</span><span class="p">,</span>  <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="o">/</span><span class="n">zip_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">zip_name</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;aws s3 cp --no-sign-request s3://asf-jupyter-data-west/NISAR_SE/&quot;</span> <span class="o">+</span> <span class="n">site</span> <span class="o">+</span> <span class="s1">&#39;.zip &#39;</span> <span class="o">+</span> <span class="n">zip_name</span>
                <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;wget --no-check-certificate --no-proxy &quot;http://asf-jupyter-data-west.s3.amazonaws.com/NISAR_SE/&#39;</span> <span class="o">+</span> <span class="n">site</span> <span class="o">+</span> <span class="s1">&#39;.zip&quot; -q --show-progress&#39;</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Downloading staged data ... &#39;</span><span class="p">)</span>
                <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">work_dir</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">zip_name</span><span class="p">)</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Finished downloading!&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Failed downloading Staged data!!! Install aws or wget to proceed&#39;</span><span class="p">)</span>

        <span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;unzip &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">work_dir</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">zip_name</span><span class="p">)</span> <span class="o">+</span><span class="s1">&#39;; rm &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">work_dir</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">zip_name</span><span class="p">)</span>
        <span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">work_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Staged data for site </span><span class="si">{}</span><span class="s2"> not sucessfully generated. Please delete site-name folder </span><span class="si">{}</span><span class="s2"> and rerun this cell&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">work_dir</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Finish preparing staged data for MintPy!!&#39;</span><span class="p">)</span>

<span class="k">else</span><span class="p">:</span>
    <span class="c1">##################### 1. Download (Aria) Interferograms from ASF ################</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">work_dir</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;NEEDED To Download ARIA GUNWs: </span><span class="se">\n</span><span class="s1"> Link to create account : https://urs.earthdata.nasa.gov/&#39;</span><span class="p">)</span>
    <span class="n">earthdata_user</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Please type your Earthdata username:&#39;</span><span class="p">)</span>
    <span class="n">earthdata_password</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Please type your Earthdata password:&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;NEEDED To Download DEMs: </span><span class="se">\n</span><span class="s1"> Link to create account : https://portal.opentopography.org/login&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;~/.topoapi&#39;</span><span class="p">):</span> <span class="c1"># if OpenTopo API key already installed</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;OpenTopo API key appears to be installed, using that&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;API key location: My Account &gt; myOpenTopo Authorizations and API Key &gt; Request API key&#39;</span><span class="p">)</span>
        <span class="n">opentopography_api_key</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Please type your OpenTopo API key:&#39;</span><span class="p">)</span>

    <span class="c1">######################## USE ARIA-TOOLS TO DOWNLOAD GUNW ########################</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    REFERENCE: https://github.com/aria-tools/ARIA-tools</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">aria_download</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;ariaDownload.py -b </span><span class="si">{bbox}</span><span class="s1"> -u </span><span class="si">{user}</span><span class="s1"> -p </span><span class="si">{password}</span><span class="s1"> -s </span><span class="si">{start}</span><span class="s1">  -e </span><span class="si">{end}</span><span class="s1"> -t </span><span class="si">{track}</span><span class="s1"> -o Count&#39;&#39;&#39;</span>

    <span class="c1">###############################################################################</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;CalVal site </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">site</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Searching for available GUNW products:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="n">command</span> <span class="o">=</span> <span class="n">aria_download</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bbox</span> <span class="o">=</span> <span class="n">sites</span><span class="p">[</span><span class="n">site</span><span class="p">][</span><span class="s1">&#39;download_region&#39;</span><span class="p">],</span>
                                   <span class="n">start</span> <span class="o">=</span> <span class="n">sites</span><span class="p">[</span><span class="n">site</span><span class="p">][</span><span class="s1">&#39;download_start_date&#39;</span><span class="p">],</span>
                                   <span class="n">end</span> <span class="o">=</span> <span class="n">sites</span><span class="p">[</span><span class="n">site</span><span class="p">][</span><span class="s1">&#39;download_end_date&#39;</span><span class="p">],</span>
                                   <span class="n">track</span> <span class="o">=</span> <span class="n">sites</span><span class="p">[</span><span class="n">site</span><span class="p">][</span><span class="s1">&#39;sentinel_track&#39;</span><span class="p">],</span>
                                   <span class="n">user</span> <span class="o">=</span> <span class="n">earthdata_user</span><span class="p">,</span>
                                   <span class="n">password</span> <span class="o">=</span> <span class="n">earthdata_password</span><span class="p">)</span>
      
    <span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">shell</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>

    <span class="c1">############## Download GUNW ##################</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Start downloading GUNW files ...&quot;</span><span class="p">)</span>
    <span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; -o&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">STDOUT</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># Missing progressbar</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Downloaded </span><span class="si">{}</span><span class="s2"> GUNW files in: </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">([(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">gunw_dir</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.nc&#39;</span><span class="p">)]),</span> <span class="n">gunw_dir</span><span class="p">))</span>

    <span class="c1">############## DO little CLEANING ###########</span>
    <span class="n">data_to_clean</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;avg_rates.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;ASFDataDload0.py&quot;</span><span class="p">,</span> <span class="s2">&quot;AvgDlSpeed.png&quot;</span><span class="p">,</span> <span class="s2">&quot;error.log&quot;</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data_to_clean</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cleaning unnecessary data </span><span class="si">{}</span><span class="s1"> in </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">gunw_dir</span><span class="p">))</span>
        <span class="p">(</span><span class="n">gunw_dir</span><span class="o">/</span><span class="n">file</span><span class="p">)</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">missing_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1">#Delete error log file from workdir</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cleaning unnecessary data error.log in </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">work_dir</span><span class="p">))</span>
    <span class="p">(</span><span class="n">work_dir</span><span class="o">/</span><span class="s2">&quot;error.log&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">missing_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144.zip
download: s3://asf-jupyter-data-west/NISAR_SE/CentralValleyA144.zip to ./CentralValleyA144.zip
Finished downloading!
Archive:  /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144.zip
   creating: CentralValleyA144/.ipynb_checkpoints/
  inflating: CentralValleyA144/MintPy/Central_Valley.cfg  
  inflating: CentralValleyA144/MintPy/avgSpatialCoh.h5  
  inflating: CentralValleyA144/MintPy/gps_enu2los.csv  
  inflating: CentralValleyA144/MintPy/timeseries.h5  
   creating: CentralValleyA144/MintPy/GPS/
  inflating: CentralValleyA144/MintPy/GPS/P304.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/HUNT.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/RNCH.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P572.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/RAPT.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P294.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P566.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/CARH.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P281.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/CACO.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P465.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/CAHA.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/BEPK.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/HELB.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P283.tenv3  
   creating: CentralValleyA144/MintPy/GPS/pic/
  inflating: CentralValleyA144/MintPy/GPS/pic/P573.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P300.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P572.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P298.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/CAWO.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P465.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P296.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/TRAN.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/MULN.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P282.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P540.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/MASW.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P304.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/CAFP.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/POMM.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/CARH.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/MNMC.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/LOWS.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/LONP.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P292.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/LAND.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/HOGS.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P283.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P294.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/BEPK.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P546.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/CAND.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/PKDB.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/TBLP.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P056.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P790.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/CAKC.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/RNCH.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P293.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P789.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/DONO.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P467.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P281.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/GR8R.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/CAHA.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P297.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/LEMA.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P566.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P531.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P547.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/CRCN.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/WLHG.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/HUNT.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/KENN.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/MIDA.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/P571.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/RAPT.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/CACO.png  
  inflating: CentralValleyA144/MintPy/GPS/pic/HELB.png  
  inflating: CentralValleyA144/MintPy/GPS/LEMA.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P297.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/CAFP.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P056.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/LOWS.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/MULN.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P282.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P467.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/MIDA.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/MASW.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/DONO.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P300.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P292.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P546.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P296.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P293.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/CAND.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/TBLP.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P531.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P790.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P540.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/WLHG.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P573.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P298.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/CAWO.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/POMM.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P571.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P789.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/KENN.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/GR8R.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/CAKC.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/P547.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/LAND.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/TRAN.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/MNMC.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/CRCN.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/HOGS.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/PKDB.tenv3  
  inflating: CentralValleyA144/MintPy/GPS/LONP.tenv3  
  inflating: CentralValleyA144/MintPy/DataHoldings.txt  
   creating: CentralValleyA144/MintPy/pic/
  inflating: CentralValleyA144/MintPy/pic/Central_Valley.cfg  
  inflating: CentralValleyA144/MintPy/pic/smallbaselineApp.cfg  
  inflating: CentralValleyA144/MintPy/numInvIfgram.h5  
  inflating: CentralValleyA144/MintPy/smallbaselineApp.cfg  
  inflating: CentralValleyA144/MintPy/velocity.h5  
  inflating: CentralValleyA144/MintPy/maskTempCoh.h5  
  inflating: CentralValleyA144/MintPy/coherenceHistory.pdf  
  inflating: CentralValleyA144/MintPy/coherenceSpatialAvg.txt  
   creating: CentralValleyA144/MintPy/inputs/
  inflating: CentralValleyA144/MintPy/inputs/Central_Valley.cfg  
  inflating: CentralValleyA144/MintPy/inputs/smallbaselineApp.cfg  
  inflating: CentralValleyA144/MintPy/inputs/geometryGeo.h5  
  inflating: CentralValleyA144/MintPy/inputs/ifgramStack.h5  
  inflating: CentralValleyA144/MintPy/maskConnComp.h5  
  inflating: CentralValleyA144/MintPy/vel_insar_vs_gnss.png  
  inflating: CentralValleyA144/MintPy/coherenceMatrix.pdf  
  inflating: CentralValleyA144/MintPy/network.pdf  
  inflating: CentralValleyA144/MintPy/pbaseHistory.pdf  
  inflating: CentralValleyA144/MintPy/temporalCoherence.h5  
Finish preparing staged data for MintPy!!
</pre></div>
</div>
</div>
</div>
<p>The following command will download all the ARIA standard products over part of the California Central Valley for the year 2018, which is 90 products. This will take some time to complete if the data is not already downloaded.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># download data for descending track 144 over part of San Joaquin Valley in southern Central Valley</span>
<span class="c1">#!ariaDownload.py -b &#39;36.18 36.26 -119.91 -119.77&#39; --track 144 -s 20180101 -e 20190101</span>
</pre></div>
</div>
</div>
</div>
<p>This ARIA time-series setup would cover the whole Sentinel-1 scene and would take a while to process, so we are skipping this setup.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!ariaTSsetup.py -f &#39;products/*.nc&#39; -b &#39;36.18 36.26 -119.91 -119.77&#39; --mask Download</span>
</pre></div>
</div>
</div>
</div>
<p>The following ARIA time-series setup <code class="docutils literal notranslate"><span class="pre">ariaTSsetup.py</span></code> extracts the data that covers only a small area around the city of Corcoran in the San Joaquin Valley where the most rapid subsidence occurred in 2018 to speed the time-series processing, which we specify with the bounding box. We also download the water mask to avoid using data over the ocean.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!ariaTSsetup.py -f &#39;products/*.nc&#39; -b &#39;35.77 36.75 -120.61 -118.06&#39;  --mask Download</span>
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="smallbaselineapp-py-overview">
<h1>1. <a class="reference external" href="http://smallbaselineApp.py">smallbaselineApp.py</a> overview<a class="headerlink" href="#smallbaselineapp-py-overview" title="Permalink to this heading">#</a></h1>
<p>This application provides a workflow which includes several steps to invert a stack of unwrapped interferograms and apply different corrections to obtain ground displacement timeseries.<br />
The workflow consists of two main blocks:</p>
<ul class="simple">
<li><p>correcting unwrapping errors and inverting for the raw phase time-series (blue ovals),</p></li>
<li><p>correcting for noise from different sources to obtain the displacement time-series (green ovals).</p></li>
</ul>
<p>Some steps are optional, which are switched off by default (marked by dashed boundaries). Configuration parameters for each step are initiated with default values in a customizable text file: <a class="reference external" href="https://github.com/insarlab/MintPy/blob/master/mintpy/defaults/smallbaselineApp.cfg">smallbaselineApp.cfg</a>. In this notebook, we will walk through some of these steps, for a complete example see the <a class="reference external" href="https://github.com/insarlab/MintPy">MintPy repository</a>.</p>
<p align="left">
  <img width="600" src="https://opensarlab-docs.asf.alaska.edu/opensarlab-notebook-assets/notebook_images/MintPyWorkflow.jpg">
</p>     
<p style="text-align: center;">
    (Figure from Yunjun et al., 2019)
</p><section id="processing-steps-of-smallbaselineapp-py">
<h2>1.1 Processing steps of <a class="reference external" href="http://smallbaselineApp.py">smallbaselineApp.py</a><a class="headerlink" href="#processing-steps-of-smallbaselineapp-py" title="Permalink to this heading">#</a></h2>
<p>The MintPy <strong><a class="reference external" href="http://smallbaselineApp.py">smallbaselineApp.py</a></strong> application provides a workflow to invert a stack of unwrapped interferograms and apply different (often optional) corrections to obtain ground displacement timeseries. A detailed overview of the options can be retrieved by involking the help option:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>smallbaselineApp.py<span class="w"> </span>--help
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>usage: smallbaselineApp.py [-h] [--dir WORKDIR] [-g] [-H] [-v] [--plot]
                           [--start STEP] [--end STEP] [--dostep STEP]
                           [customTemplateFile]

Routine Time Series Analysis for Small Baseline InSAR Stack

positional arguments:
  customTemplateFile    custom template with option settings.
                        ignored if the default smallbaselineApp.cfg is input.

optional arguments:
  -h, --help            show this help message and exit
  --dir WORKDIR, --work-dir WORKDIR
                        work directory, (default: ./).
  -g                    generate default template (if it does not exist) and exit.
  -H                    print the default template file and exit.
  -v, --version         print software version and exit
  --plot                plot results [only] without running smallbaselineApp.

steps processing (start/end/dostep):
  Command line options for steps processing with names are chosen from the following list:
  
  [&#39;load_data&#39;, &#39;modify_network&#39;, &#39;reference_point&#39;, &#39;quick_overview&#39;, &#39;correct_unwrap_error&#39;]
  [&#39;invert_network&#39;, &#39;correct_LOD&#39;, &#39;correct_SET&#39;, &#39;correct_troposphere&#39;, &#39;deramp&#39;, &#39;correct_topography&#39;]
  [&#39;residual_RMS&#39;, &#39;reference_date&#39;, &#39;velocity&#39;, &#39;geocode&#39;, &#39;google_earth&#39;, &#39;hdfeos5&#39;]
  
  In order to use either --start or --dostep, it is necessary that a
  previous run was done using one of the steps options to process at least
  through the step immediately preceding the starting step of the current run.

  --start STEP          start processing at the named step (default: load_data).
  --end STEP, --stop STEP
                        end processing at the named step (default: hdfeos5)
  --dostep STEP         run processing at the named step only

reference:
  Yunjun, Z., H. Fattahi, and F. Amelung (2019), Small baseline InSAR time series analysis:
    Unwrapping error correction and noise reduction, Computers &amp; Geosciences, 133, 104331,
    doi:10.1016/j.cageo.2019.104331.

example:
  smallbaselineApp.py                         # run with default template &#39;smallbaselineApp.cfg&#39;
  smallbaselineApp.py &lt;custom_template&gt;       # run with default and custom templates
  smallbaselineApp.py -h / --help             # help
  smallbaselineApp.py -H                      # print    default template options
  smallbaselineApp.py -g                      # generate default template if it does not exist
  smallbaselineApp.py -g &lt;custom_template&gt;    # generate/update default template based on custom template
  smallbaselineApp.py --plot                  # plot results w/o run [to populate the &#39;pic&#39; folder after failed runs]

  # step processing with --start/stop/dostep options
  smallbaselineApp.py GalapagosSenDT128.template --dostep velocity  # run at step &#39;velocity&#39; only
  smallbaselineApp.py GalapagosSenDT128.template --end load_data    # end after step &#39;load_data&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="configuring-processing-parameters">
<h2>1.2 Configuring processing parameters<a class="headerlink" href="#configuring-processing-parameters" title="Permalink to this heading">#</a></h2>
<p>The processing parameters for the <strong><a class="reference external" href="http://smallbaselineApp.py">smallbaselineApp.py</a></strong> are controlled through a configuration file. If no file is provided the default <a class="reference external" href="https://github.com/insarlab/MintPy/blob/master/mintpy/defaults/smallbaselineApp.cfg">smallbaselineApp.cfg</a> configuration is used. Here we use the configuration parameters generated below (or included with the staged data), which already contains selected, manually modified configuration parameters for this time-series analysis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">config_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">mintpy_dir</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">sites</span><span class="p">[</span><span class="n">site</span><span class="p">][</span><span class="s1">&#39;calval_location&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.cfg&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">Use_Staged_Data</span><span class="p">:</span>
    <span class="c1">####################################################################</span>
    <span class="c1">### Write smallbaseline.py config file</span>
    <span class="n">config_file_content</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    mintpy.load.processor = aria</span>
<span class="s2">    mintpy.compute.numWorker = auto</span>
<span class="s2">    mintpy.load.unwFile = ../stack/unwrapStack.vrt</span>
<span class="s2">    mintpy.load.corFile = ../stack/cohStack.vrt</span>
<span class="s2">    mintpy.load.connCompFile = ../stack/connCompStack.vrt</span>
<span class="s2">    mintpy.load.demFile = ../DEM/SRTM_3arcsec.dem</span>
<span class="s2">    mintpy.load.incAngleFile = ../incidenceAngle/*.vrt</span>
<span class="s2">    mintpy.load.azAngleFile = ../azimuthAngle/*.vrt</span>
<span class="s2">    mintpy.load.waterMaskFile = </span><span class="si">{mask_file}</span>
<span class="s2">    mintpy.topographicResidual.pixelwiseGeometry = no</span>
<span class="s2">    mintpy.troposphericDelay.method = no</span>
<span class="s2">    mintpy.topographicResidual = no</span>
<span class="s2">    mintpy.network.tempBaseMax = </span><span class="si">{tempmax}</span>
<span class="s2">    mintpy.network.startDate = </span><span class="si">{startdatenet}</span>
<span class="s2">    mintpy.network.endDate = </span><span class="si">{enddatenet}</span>
<span class="s2">    mintpy.velocity.startDate = </span><span class="si">{startdatevel}</span>
<span class="s2">    mintpy.velocity.endDate = </span><span class="si">{enddatevel}</span>
<span class="s2">    mintpy.reference.lalo = </span><span class="si">{reference_lalo}</span>
<span class="s2">    mintpy.network.excludeIfgIndex = </span><span class="si">{excludeIfg}</span><span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask_file</span> <span class="o">=</span> <span class="n">mask_file</span><span class="p">,</span>
                                                            <span class="n">tempmax</span><span class="o">=</span><span class="n">sites</span><span class="p">[</span><span class="n">site</span><span class="p">][</span><span class="s1">&#39;tempBaseMax&#39;</span><span class="p">],</span>
                                                            <span class="n">excludeIfg</span><span class="o">=</span><span class="n">sites</span><span class="p">[</span><span class="n">site</span><span class="p">][</span><span class="s1">&#39;ifgExcludeList&#39;</span><span class="p">],</span>
                                                            <span class="n">startdatenet</span><span class="o">=</span><span class="n">sites</span><span class="p">[</span><span class="n">site</span><span class="p">][</span><span class="s1">&#39;download_start_date&#39;</span><span class="p">],</span>
                                                            <span class="n">enddatenet</span><span class="o">=</span><span class="n">sites</span><span class="p">[</span><span class="n">site</span><span class="p">][</span><span class="s1">&#39;download_end_date&#39;</span><span class="p">],</span>
                                                            <span class="n">startdatevel</span><span class="o">=</span><span class="n">sites</span><span class="p">[</span><span class="n">site</span><span class="p">][</span><span class="s1">&#39;download_start_date&#39;</span><span class="p">],</span>
                                                            <span class="n">enddatevel</span><span class="o">=</span><span class="n">sites</span><span class="p">[</span><span class="n">site</span><span class="p">][</span><span class="s1">&#39;download_end_date&#39;</span><span class="p">],</span>
                                                            <span class="n">reference_lalo</span><span class="o">=</span><span class="n">sites</span><span class="p">[</span><span class="n">site</span><span class="p">][</span><span class="s1">&#39;reference_lalo&#39;</span><span class="p">])</span>

    <span class="n">config_file</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">config_file_content</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;MintPy config file:</span><span class="se">\n</span><span class="s1">    </span><span class="si">{}</span><span class="s1">:&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">config_file</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">config_file</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MintPy config file:
    /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/Central_Valley.cfg:
mintpy.load.processor = aria
mintpy.compute.numWorker = auto 
mintpy.load.unwFile = ../stack/unwrapStack.vrt
mintpy.load.corFile = ../stack/cohStack.vrt
mintpy.load.connCompFile = ../stack/connCompStack.vrt
mintpy.load.demFile = ../DEM/SRTM_3arcsec.dem
mintpy.load.incAngleFile = ../incidenceAngle/*.vrt
mintpy.load.azAngleFile = ../azimuthAngle/*.vrt
mintpy.load.waterMaskFile = ../mask/watermask.msk
mintpy.reference.lalo = auto
mintpy.topographicResidual.pixelwiseGeometry = no
mintpy.troposphericDelay.method = no
mintpy.topographicResidual = no
mintpy.network.tempBaseMax = auto
mintpy.network.excludeIfgIndex = auto
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="small-baseline-time-series-analysis">
<h1>2. Small Baseline Time Series Analysis<a class="headerlink" href="#small-baseline-time-series-analysis" title="Permalink to this heading">#</a></h1>
<section id="loading-aria-data-into-mintpy">
<h2>2.1. Loading ARIA data into MintPy<a class="headerlink" href="#loading-aria-data-into-mintpy" title="Permalink to this heading">#</a></h2>
<p>The <a class="reference external" href="https://github.com/aria-tools/ARIA-tools">ARIA-tools package</a> is used as a pre-processor for MintPY. It has a download tool that wraps around the ASF DAAC API, and includes tools for stitching/cropping and time-series preparation. The output of the time-series preparation is compatible with the <a class="reference external" href="https://mintpy.readthedocs.io/en/latest/dir_structure/">data directory</a> structure from MintPy. To save time, we have already pre-ran these steps. The commands used were:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>!ariaDownload.py -b &#39;36.18 36.26 -119.91 -119.77&#39; --track 144 -s 20180101 -e 20190101
#!ariaTSsetup.py -f &#39;products/*.nc&#39; -b &#39;35.77 36.75 -120.61 -118.06&#39;  --mask Download
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ariaTSsetup.py</span></code> step above (or the pre-processed <code class="docutils literal notranslate"><span class="pre">CentralValleyA144.zip</span></code>) extracted the data for the subset we specified and found a total of 86 products that cover our study area. Now we load the data for the subset area into MintPy.</p>
<p>The next step loads the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Go to work directory: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mintpy_dir</span><span class="p">))</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">mintpy_dir</span><span class="p">)</span>  

<span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;smallbaselineApp.py &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; --dostep load_data&#39;</span>
<span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mintpy input files:&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;inputs&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.h5&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Go to work directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/jovyan/.local/envs/NISAR_EA_Workshop_2024_1/lib/python3.9/site-packages/mintpy/load_data.py:735: UserWarning: prep_aria.py failed. Assuming its result exists and continue...
  warnings.warn(&#39;prep_aria.py failed. Assuming its result exists and continue...&#39;)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MintPy version 1.5.1, date 2023-01-03
--RUN-at-2024-01-17 22:55:20.595413--
Current directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy
Run routine processing with smallbaselineApp.py on steps: [&#39;load_data&#39;]
Remaining steps: [&#39;modify_network&#39;, &#39;reference_point&#39;, &#39;quick_overview&#39;, &#39;correct_unwrap_error&#39;, &#39;invert_network&#39;, &#39;correct_LOD&#39;, &#39;correct_SET&#39;, &#39;correct_troposphere&#39;, &#39;deramp&#39;, &#39;correct_topography&#39;, &#39;residual_RMS&#39;, &#39;reference_date&#39;, &#39;velocity&#39;, &#39;geocode&#39;, &#39;google_earth&#39;, &#39;hdfeos5&#39;]
--------------------------------------------------
Project name: Central_Valley
Go to work directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy
obsolete default template detected, update to the latest version.
    mintpy.load.processor: auto --&gt; aria
    mintpy.load.unwFile: auto --&gt; ../stack/unwrapStack.vrt
    mintpy.load.corFile: auto --&gt; ../stack/cohStack.vrt
    mintpy.load.connCompFile: auto --&gt; ../stack/connCompStack.vrt
    mintpy.load.demFile: auto --&gt; ../DEM/SRTM_3arcsec.dem
    mintpy.load.incAngleFile: auto --&gt; ../incidenceAngle/*.vrt
    mintpy.load.azAngleFile: auto --&gt; ../azimuthAngle/*.vrt
    mintpy.load.waterMaskFile: auto --&gt; ../mask/watermask.msk
    mintpy.troposphericDelay.method: auto --&gt; no
    mintpy.topographicResidual: auto --&gt; no
    mintpy.topographicResidual.pixelwiseGeometry: auto --&gt; no
read custom template file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/Central_Valley.cfg
update default template based on input custom template
No new option value found, skip updating /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg
copy smallbaselineApp.cfg to inputs   directory for backup.
copy smallbaselineApp.cfg to pic      directory for backup.
read default template file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg


******************** step - load_data ********************

load_data.py --template /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/Central_Valley.cfg --project Central_Valley
processor : aria
SAR platform/sensor : unknown from project name &quot;Central_Valley&quot;
--------------------------------------------------
prepare metadata files for aria products
prep_aria.py --template /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg --stack-dir ../stack --unwrap-stack-name unwrapStack.vrt --coherence-stack-name cohStack.vrt --conn-comp-stack-name connCompStack.vrt --dem ../DEM/SRTM_3arcsec.dem --incidence-angle &quot;../incidenceAngle/*.vrt&quot; --azimuth-angle &quot;../azimuthAngle/*.vrt&quot; --water-mask ../mask/watermask.msk --update
read options from template file: smallbaselineApp.cfg
multilook x/ystep: 1/1
multilook method : nearest
search input data file info:
No lookup table (longitude or rangeCoord) found in files.
Input data seems to be geocoded. Lookup file not needed.
Loaded dataset are processed by InSAR software: isce
Loaded dataset are in GEO coordinates
Interferogram Stack: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/ifgramStack.h5
Geometry      File : /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/geometryGeo.h5
Lookup Table  File : None
--------------------------------------------------
updating metadata based on custom template file Central_Valley.cfg for file: ifgramStack.h5
updating metadata based on custom template file Central_Valley.cfg for file: geometryGeo.h5
Go back to directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy

################################################
   Normal end of smallbaselineApp processing!
################################################
Time used: 00 mins 0.1 secs

Mintpy input files:
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;geometryGeo.h5&#39;, &#39;ifgramStack.h5&#39;]
</pre></div>
</div>
</div>
</div>
<p>The output of the loading step is an “inputs” directory containing two HDF5 files:</p>
<ul class="simple">
<li><p>ifgramStack.h5: This file contains 6 dataset cubes (e.g. unwrapped phase, coherence, connected components etc.) and multiple metadata.</p></li>
<li><p>geometryGeo.h5: This file contains geometrical datasets (e.g., incidence/azimuth angle, masks, etc.).</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>ls<span class="w"> </span>inputs
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Central_Valley.cfg  geometryGeo.h5  ifgramStack.h5  smallbaselineApp.cfg
</pre></div>
</div>
</div>
</div>
<div class="alert alert-info">
<b>info.py :</b> 
To get general infomation about a MintPy product, run info.py on the file.   
</div><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>info.py<span class="w"> </span>inputs/ifgramStack.h5
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>******************** Basic File Info ************************
file name: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/ifgramStack.h5
file type: ifgramStack
coordinates : GEO

******************** HDF5 File Structure ********************
Attributes in / level:
  ALOOKS                                          7
  ANTENNA_SIDE                                    -1
  CENTER_LINE_UTC                                 50402.0
  EARTH_RADIUS                                    6337286.638938101
  FILE_LENGTH                                     1177
  FILE_TYPE                                       ifgramStack
  HEADING                                         -168
  HEIGHT                                          693000.0
  LAT_REF1                                        36.75124999999996
  LAT_REF2                                        36.75124999999996
  LAT_REF3                                        35.77041666666667
  LAT_REF4                                        35.77041666666667
  LENGTH                                          1177
  LON_REF1                                        -118.05958333333366
  LON_REF2                                        -120.61041666666667
  LON_REF3                                        -118.05958333333366
  LON_REF4                                        -120.61041666666667
  NCORRLOOKS                                      61.29302259485575
  NUMBER_OF_PAIRS                                 86
  ORBIT_DIRECTION                                 DESCENDING
  PLATFORM                                        Sen
  PROCESSOR                                       isce
  RANGE_PIXEL_SIZE                                44.26168155670166
  REF_LAT                                         36.6333333805
  REF_LON                                         -119.26916720349999
  REF_X                                           1609
  REF_Y                                           141
  RLOOKS                                          19
  STARTING_RANGE                                  798980.125
  UTCTime (HH:MM:SS.ss)                           14:00:02.000000
  WAVELENGTH                                      0.05546576
  WIDTH                                           3061
  Wavelength (m)                                  0.05546576
  X_FIRST                                         -120.610416667
  X_STEP                                          0.000833333
  X_UNIT                                          degrees
  Y_FIRST                                         36.751250000
  Y_STEP                                          -0.000833333
  Y_UNIT                                          degrees
  azimuthAngle                                    -11.523661632769485
  endRange                                        956307.125
  incidenceAngle                                  38.023999928462885
  lookAngle                                       33.65346018215909
  mintpy.compute.numWorker                        auto
  mintpy.load.azAngleFile                         ../azimuthAngle/*.vrt
  mintpy.load.connCompFile                        ../stack/connCompStack.vrt
  mintpy.load.corFile                             ../stack/cohStack.vrt
  mintpy.load.demFile                             ../DEM/SRTM_3arcsec.dem
  mintpy.load.incAngleFile                        ../incidenceAngle/*.vrt
  mintpy.load.processor                           aria
  mintpy.load.unwFile                             ../stack/unwrapStack.vrt
  mintpy.load.waterMaskFile                       ../mask/watermask.msk
  mintpy.network.excludeIfgIndex                  auto
  mintpy.network.tempBaseMax                      auto
  mintpy.reference.lalo                           auto
  mintpy.topographicResidual                      no
  mintpy.topographicResidual.pixelwiseGeometry    no
  mintpy.troposphericDelay.method                 no
  orbitDirection                                  DESCENDING
  slantRangeSpacing                               2.329562187194824
  startRange                                      798980.125

HDF5 dataset &quot;/bperp               &quot;: shape=(86,)               , dtype=float32   , compression=gzip
HDF5 dataset &quot;/coherence           &quot;: shape=(86, 1177, 3061)    , dtype=float32   , compression=gzip
  MODIFICATION_TIME    1650597648.6011388
HDF5 dataset &quot;/connectComponent    &quot;: shape=(86, 1177, 3061)    , dtype=int16     , compression=lzf
  MODIFICATION_TIME    1650597648.6015394
HDF5 dataset &quot;/date                &quot;: shape=(86, 2)             , dtype=|S8       , compression=gzip
HDF5 dataset &quot;/dropIfgram          &quot;: shape=(86,)               , dtype=bool      , compression=gzip
HDF5 dataset &quot;/unwrapPhase         &quot;: shape=(86, 1177, 3061)    , dtype=float32   , compression=gzip
  MODIFICATION_TIME    1650597648.600581
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>info.py<span class="w"> </span>inputs/geometryGeo.h5
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>******************** Basic File Info ************************
file name: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/geometryGeo.h5
file type: geometry
coordinates : GEO

******************** HDF5 File Structure ********************
Attributes in / level:
  ALOOKS                                          7
  ANTENNA_SIDE                                    -1
  CENTER_LINE_UTC                                 50402.0
  EARTH_RADIUS                                    6337286.638938101
  FILE_LENGTH                                     1177
  FILE_TYPE                                       geometry
  HEADING                                         -168
  HEIGHT                                          693000.0
  LAT_REF1                                        36.75124999999996
  LAT_REF2                                        36.75124999999996
  LAT_REF3                                        35.77041666666667
  LAT_REF4                                        35.77041666666667
  LENGTH                                          1177
  LON_REF1                                        -118.05958333333366
  LON_REF2                                        -120.61041666666667
  LON_REF3                                        -118.05958333333366
  LON_REF4                                        -120.61041666666667
  NCORRLOOKS                                      61.29302259485575
  NUMBER_OF_PAIRS                                 86
  ORBIT_DIRECTION                                 DESCENDING
  PLATFORM                                        Sen
  PROCESSOR                                       isce
  RANGE_PIXEL_SIZE                                44.26168155670166
  RLOOKS                                          19
  STARTING_RANGE                                  798980.125
  UTCTime (HH:MM:SS.ss)                           14:00:02.000000
  WAVELENGTH                                      0.05546576
  WIDTH                                           3061
  Wavelength (m)                                  0.05546576
  X_FIRST                                         -120.610416667
  X_STEP                                          0.000833333
  X_UNIT                                          degrees
  Y_FIRST                                         36.751250000
  Y_STEP                                          -0.000833333
  Y_UNIT                                          degrees
  azimuthAngle                                    -11.523661632769485
  endRange                                        956307.125
  incidenceAngle                                  38.023999928462885
  lookAngle                                       33.65346018215909
  mintpy.compute.numWorker                        auto
  mintpy.load.azAngleFile                         ../azimuthAngle/*.vrt
  mintpy.load.connCompFile                        ../stack/connCompStack.vrt
  mintpy.load.corFile                             ../stack/cohStack.vrt
  mintpy.load.demFile                             ../DEM/SRTM_3arcsec.dem
  mintpy.load.incAngleFile                        ../incidenceAngle/*.vrt
  mintpy.load.processor                           aria
  mintpy.load.unwFile                             ../stack/unwrapStack.vrt
  mintpy.load.waterMaskFile                       ../mask/watermask.msk
  mintpy.network.excludeIfgIndex                  auto
  mintpy.network.tempBaseMax                      auto
  mintpy.reference.lalo                           auto
  mintpy.topographicResidual                      no
  mintpy.topographicResidual.pixelwiseGeometry    no
  mintpy.troposphericDelay.method                 no
  orbitDirection                                  DESCENDING
  slantRangeSpacing                               2.329562187194824
  startRange                                      798980.125

HDF5 dataset &quot;/azimuthAngle        &quot;: shape=(1177, 3061)        , dtype=float32   , compression=gzip
HDF5 dataset &quot;/height              &quot;: shape=(1177, 3061)        , dtype=float32   , compression=gzip
HDF5 dataset &quot;/incidenceAngle      &quot;: shape=(1177, 3061)        , dtype=float32   , compression=gzip
HDF5 dataset &quot;/slantRangeDistance  &quot;: shape=(1177, 3061)        , dtype=float32   , compression=gzip
</pre></div>
</div>
</div>
</div>
</section>
<section id="plotting-the-interferogram-network">
<h2>2.2. Plotting the interferogram network<a class="headerlink" href="#plotting-the-interferogram-network" title="Permalink to this heading">#</a></h2>
<p>Running <strong>plot_network.py</strong> gives an overview of the network and the average coherence of the stack. The program creates multiple files as follows:</p>
<ul class="simple">
<li><p>ifgramStack_coherence_spatialAvg.txt: Contains interferogram dates, average coherence temporal and spatial baseline separation.</p></li>
<li><p>Network.pdf: Displays the network of interferograms on time-baseline coordinates, colorcoded by avergae coherence of the interferograms.</p></li>
<li><p>CoherenceMatrix.pdf shows the avergae coherence pairs between all available pairs in the stack.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;smallbaselineApp.py &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; --dostep modify_network&#39;</span>
<span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#!smallbaselineApp.py Central_Valley.cfg  --dostep modify_network</span>
<span class="n">plot_network</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s1">&#39;inputs/ifgramStack.h5&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MintPy version 1.5.1, date 2023-01-03
--RUN-at-2024-01-17 22:55:32.538893--
Current directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy
Run routine processing with smallbaselineApp.py on steps: [&#39;modify_network&#39;]
Remaining steps: [&#39;reference_point&#39;, &#39;quick_overview&#39;, &#39;correct_unwrap_error&#39;, &#39;invert_network&#39;, &#39;correct_LOD&#39;, &#39;correct_SET&#39;, &#39;correct_troposphere&#39;, &#39;deramp&#39;, &#39;correct_topography&#39;, &#39;residual_RMS&#39;, &#39;reference_date&#39;, &#39;velocity&#39;, &#39;geocode&#39;, &#39;google_earth&#39;, &#39;hdfeos5&#39;]
--------------------------------------------------
Project name: Central_Valley
Go to work directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy
read custom template file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/Central_Valley.cfg
update default template based on input custom template
No new option value found, skip updating /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg
read default template file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg


******************** step - modify_network ********************
Input data seems to be geocoded. Lookup file not needed.

modify_network.py /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/ifgramStack.h5 -t /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg
read options from template file: smallbaselineApp.cfg
No lookup table (longitude or rangeCoord) found in files.
No input option found to remove interferogram
Keep all interferograms by enable --reset option
--------------------------------------------------
reset dataset &#39;dropIfgram&#39; to True for all interferograms for file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/ifgramStack.h5
All dropIfgram are already True, no need to reset.

plot_network.py /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/ifgramStack.h5 -t /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg --nodisplay -d coherence -v 0.2 1.0
read options from template file: smallbaselineApp.cfg
read temporal/spatial baseline info from file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/ifgramStack.h5
open ifgramStack file: ifgramStack.h5
calculating spatial mean of coherence in file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/ifgramStack.h5 ...
[==================================================] 86/86    2s /     0s 
write average value in space into text file: coherenceSpatialAvg.txt
number of acquisitions: 31
number of interferograms: 86
shift all perp baseline by 36.84323501586914 to zero mean for plotting
--------------------------------------------------
number of interferograms marked as drop: 0
number of interferograms marked as keep: 86
number of acquisitions marked as drop: 0
save figure to pbaseHistory.pdf
save figure to coherenceMatrix.pdf
save figure to coherenceHistory.pdf
max perpendicular baseline: 174.00 m
max temporal      baseline: 48.0 days
showing coherence
data range: [0.60776895, 0.9700511]
display range: [0.2, 1.0]
save figure to network.pdf
Go back to directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy

################################################
   Normal end of smallbaselineApp processing!
################################################
Time used: 00 mins 11.2 secs

read temporal/spatial baseline info from file: inputs/ifgramStack.h5
open ifgramStack file: ifgramStack.h5
[&#39;coherenceSpatialAvg.txt&#39;] exists and is newer than [&#39;inputs/ifgramStack.h5&#39;] --&gt; skip.
coherenceSpatialAvg.txt already exists, read it directly
number of acquisitions: 31
number of interferograms: 86
shift all perp baseline by 36.84323501586914 to zero mean for plotting
--------------------------------------------------
number of interferograms marked as drop: 0
number of interferograms marked as keep: 86
number of acquisitions marked as drop: 0
max perpendicular baseline: 174.00 m
max temporal      baseline: 48.0 days
showing coherence
data range: [0.6078, 0.9701]
display range: (0.2, 1.0)
showing ...
</pre></div>
</div>
<img alt="../_images/b6aa97750ba2cbef80efb7b5b21c1131f773003502252e892e9367d5cadeb899.png" src="../_images/b6aa97750ba2cbef80efb7b5b21c1131f773003502252e892e9367d5cadeb899.png" />
<img alt="../_images/8e80755987493a73cc8b98c18c347486e501663fb84049cae084a56c8cc1b4c9.png" src="../_images/8e80755987493a73cc8b98c18c347486e501663fb84049cae084a56c8cc1b4c9.png" />
<img alt="../_images/709fe54eeadec9173f403f7b86db7421711bcb420bdf097d50637593a5e4dae5.png" src="../_images/709fe54eeadec9173f403f7b86db7421711bcb420bdf097d50637593a5e4dae5.png" />
<img alt="../_images/68f1357862d6f991a3ab552fb3d790c2b984b5509f1717ecc3c174df4ff840fd.png" src="../_images/68f1357862d6f991a3ab552fb3d790c2b984b5509f1717ecc3c174df4ff840fd.png" />
</div>
</div>
</section>
<section id="mask-generation">
<h2>2.3.  Mask generation<a class="headerlink" href="#mask-generation" title="Permalink to this heading">#</a></h2>
<p>Mask files can be can be used to mask pixels in the time-series processing. Below we generate a mask file based on the connected components, which is a metric for unwrapping quality.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>generate_mask.py<span class="w">  </span>inputs/ifgramStack.h5<span class="w">  </span>--nonzero<span class="w">  </span>-o<span class="w"> </span>maskConnComp.h5<span class="w">  </span>--update
<span class="n">view</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s1">&#39;maskConnComp.h5&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>input ifgramStack file: inputs/ifgramStack.h5
--------------------------------------------------
update mode: ON
1) output file maskConnComp.h5 already exists.
2) output file is newer than input dataset: connectComponent.
run or skip: skip.
run view.py in MintPy version 1.5.1, date 2023-01-03
input file is mask file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/maskConnComp.h5 in bool format
file size in y/x: (1177, 3061)
num of datasets in file maskConnComp.h5: 1
datasets to exclude (0):
[]
datasets to display (1):
[&#39;mask&#39;]
data   coverage in y/x: (0, 0, 3061, 1177)
subset coverage in y/x: (0, 0, 3061, 1177)
data   coverage in lat/lon: (-120.610416667, 36.75125, -118.059584354, 35.770417059)
subset coverage in lat/lon: (-120.610416667, 36.75125, -118.059584354, 35.770417059)
------------------------------------------------------------------------
colormap: jet
figure title: maskConnComp
figure size : [10.00, 3.08]
reading data ...
data has uniform and limited number (2 &lt;= 20) of unique values --&gt; discretize colormap
data    range: [False, True] 1
display range: [-0.5, 1.5] 1
display data in transparency: 1.0
plot in geo-coordinate
plotting image ...
plot scale bar: [0.2, 0.2, 0.1]
showing ...
</pre></div>
</div>
<img alt="../_images/2fb3069b30b809c357ec5355188e2f69e32ff0441fb747b2d9871fd04759da92.png" src="../_images/2fb3069b30b809c357ec5355188e2f69e32ff0441fb747b2d9871fd04759da92.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># !view.py </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>usage: view.py [-h] [-n [NUM ...]] [--nosearch] [--ex [Dset ...]]
               [--show-kept] [--noverbose]
               [--math {square,inverse,sqrt,rad2deg,reverse,deg2rad}]
               [-v VMIN VMAX] [-u UNIT] [--nd NO_DATA_VALUE] [--wrap]
               [--wrap-range MIN MAX] [--flip-lr] [--flip-ud] [--noflip]
               [--nmli NUM] [--nomultilook] [--alpha TRANSPARENCY]
               [-d DEM_FILE] [--mask-dem] [--dem-noshade] [--dem-nocontour]
               [--contour-smooth DEM_CONTOUR_SMOOTH] [--contour-step NUM]
               [--contour-lw NUM] [--shade-az DEG] [--shade-alt DEG]
               [--shade-min MIN] [--shade-max MAX] [--shade-exag SHADE_EXAG]
               [--fontsize FONT_SIZE] [--fontcolor FONT_COLOR]
               [--nowhitespace] [--noaxis] [--notick]
               [--ylabel-rot YLABEL_ROT] [-c COLORMAP] [--cm-lut NUM]
               [--cm-vlist CMAP_VLIST CMAP_VLIST CMAP_VLIST] [--nocbar]
               [--cbar-nbins NUM] [--cbar-ext {min,both,max,None,neither}]
               [--cbar-label CBAR_LABEL] [--cbar-loc CBAR_LOC]
               [--cbar-size CBAR_SIZE] [--notitle] [--title-in]
               [--title FIG_TITLE] [--title4sen] [--figsize WID LEN]
               [--dpi DPI]
               [--figext {.emf,.eps,.pdf,.png,.ps,.raw,.rgba,.svg,.svgz}]
               [--fignum NUM] [--nrows NUM] [--ncols NUM]
               [--wspace FIG_WID_SPACE] [--hspace FIG_HEI_SPACE]
               [--no-tight-layout] [--coord {radar,geo}] [--animation]
               [--show-gps] [--mask-gps] [--gps-label]
               [--gps-ms GPS_MARKER_SIZE]
               [--gps-comp {horz,hz2los,vert,up2los,enu2los}] [--gps-redo]
               [--ref-gps REF_GPS_SITE] [--ex-gps [EX_GPS_SITES ...]]
               [--gps-start-date YYYYMMDD] [--gps-end-date YYYYMMDD]
               [--horz-az HORZ_AZ_ANGLE] [-m FILE] [--mask-vmin MASK_VMIN]
               [--mask-vmax MASK_VMAX] [--zm] [--coastline {110m,50m,10m}]
               [--coastline-lw NUM] [--lalo-label] [--lalo-step DEG]
               [--lalo-max-num NUM] [--lalo-loc left right top bottom]
               [--lalo-off LALO_OFFSET LALO_OFFSET] [--lalo-fs LALO_FONT_SIZE]
               [--scalebar LEN X Y] [--noscalebar]
               [--scalebar-pad SCALEBAR_PAD] [--ram MAXMEMORY]
               [--pts-marker PTS_MARKER] [--pts-ms PTS_MARKER_SIZE]
               [--pts-yx Y X | --pts-lalo LAT LON | --pts-file PTS_FILE]
               [--ref-date DATE] [--ref-lalo LAT LON] [--ref-yx Y X]
               [--noreference] [--ref-marker REF_MARKER] [--ref-size NUM]
               [-o [OUTFILE ...]] [--save] [--nodisplay] [--update]
               [--sub-x XMIN XMAX] [--sub-y YMIN YMAX]
               [--sub-lat LATMIN LATMAX] [--sub-lon LONMIN LONMAX]
               file [dset ...]
view.py: error: the following arguments are required: file
</pre></div>
</div>
</div>
</div>
</section>
<section id="reference-point">
<h2>reference_point<a class="headerlink" href="#reference-point" title="Permalink to this heading">#</a></h2>
<p>The interferometric phase is relative observation by nature. The phases of each unwrapped interferogram are relative with respect to an arbitrary pixel. Therfore we need to reference all interferograms to a common reference pixel.
The step “reference_point” selects a common reference pixel for the stack of interferograms. The default approach of mintpy is to choose a pixel with highest spatial coherence in the stack. Other options include specifying the longitude and latitude of the desired reference pixel or the line and column number of the refence pixel.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;smallbaselineApp.py &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; --dostep reference_point&#39;</span>
<span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#!smallbaselineApp.py Central_Valley.cfg --dostep reference_point</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MintPy version 1.5.1, date 2023-01-03
--RUN-at-2024-01-17 22:56:14.995041--
Current directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy
Run routine processing with smallbaselineApp.py on steps: [&#39;reference_point&#39;]
Remaining steps: [&#39;quick_overview&#39;, &#39;correct_unwrap_error&#39;, &#39;invert_network&#39;, &#39;correct_LOD&#39;, &#39;correct_SET&#39;, &#39;correct_troposphere&#39;, &#39;deramp&#39;, &#39;correct_topography&#39;, &#39;residual_RMS&#39;, &#39;reference_date&#39;, &#39;velocity&#39;, &#39;geocode&#39;, &#39;google_earth&#39;, &#39;hdfeos5&#39;]
--------------------------------------------------
Project name: Central_Valley
Go to work directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy
read custom template file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/Central_Valley.cfg
update default template based on input custom template
No new option value found, skip updating /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg
read default template file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg


******************** step - reference_point ********************
Input data seems to be geocoded. Lookup file not needed.

generate_mask.py /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/ifgramStack.h5 --nonzero -o /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/maskConnComp.h5 --update
input ifgramStack file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/ifgramStack.h5
--------------------------------------------------
update mode: ON
1) output file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/maskConnComp.h5 already exists.
2) output file is newer than input dataset: connectComponent.
run or skip: skip.

temporal_average.py /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/ifgramStack.h5 --dataset coherence -o /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/avgSpatialCoh.h5 --update
--------------------------------------------------
update mode: ON
1) output file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/avgSpatialCoh.h5 already exists.
2) output file is newer than input dataset: coherence.
run or skip: skip.
Input data seems to be geocoded. Lookup file not needed.

reference_point.py /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/ifgramStack.h5 -t /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg -c /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/avgSpatialCoh.h5
--------------------------------------------------
reading reference info from template: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg
no input reference y/x.
REF_Y/X exists in input file, skip updating.
REF_Y: 141
REF_X: 1609
reference point selection method: None
--------------------------------------------------
Go back to directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy

################################################
   Normal end of smallbaselineApp processing!
################################################
Time used: 00 mins 0.2 secs
</pre></div>
</div>
</div>
</div>
<p>Running the “reference_step” adds additional attributes “REF_X, REF_Y” and “REF_LON, REF_LAT” to the ifgramStack.h5 file. To see the attributes of the file run <a class="reference external" href="http://info.py">info.py</a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>info.py<span class="w"> </span>inputs/ifgramStack.h5<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span><span class="s1">&#39;REF_&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  REF_LAT                                         36.6333333805
  REF_LON                                         -119.26916720349999
  REF_X                                           1609
  REF_Y                                           141
</pre></div>
</div>
</div>
</div>
<p>In this case, I set the reference point latitude and longitude to be in a location, and MintPy calculated the X and Y locations.</p>
</section>
<section id="inverting-of-the-small-baseline-network">
<h2>2.4. Inverting of the Small Baseline network<a class="headerlink" href="#inverting-of-the-small-baseline-network" title="Permalink to this heading">#</a></h2>
<p>In the next step we invert the network of differential unwrapped interferograms to estimate the time-series of unwrapped phase with respect to a reference acquisition date. By default mintpy selects the first acquisition. The estimated time-series is converted to distance change from radar to target and is provided in meters.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;smallbaselineApp.py &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; --dostep invert_network&#39;</span>
<span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#!smallbaselineApp.py Central_Valley.cfg  --dostep invert_network</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MintPy version 1.5.1, date 2023-01-03
--RUN-at-2024-01-17 22:56:24.653783--
Current directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy
Run routine processing with smallbaselineApp.py on steps: [&#39;invert_network&#39;]
Remaining steps: [&#39;correct_LOD&#39;, &#39;correct_SET&#39;, &#39;correct_troposphere&#39;, &#39;deramp&#39;, &#39;correct_topography&#39;, &#39;residual_RMS&#39;, &#39;reference_date&#39;, &#39;velocity&#39;, &#39;geocode&#39;, &#39;google_earth&#39;, &#39;hdfeos5&#39;]
--------------------------------------------------
Project name: Central_Valley
Go to work directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy
read custom template file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/Central_Valley.cfg
update default template based on input custom template
No new option value found, skip updating /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg
read default template file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg


******************** step - invert_network ********************
Input data seems to be geocoded. Lookup file not needed.

ifgram_inversion.py /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/inputs/ifgramStack.h5 -t /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg --update
read input option from template file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg
use dataset &quot;unwrapPhase&quot; by default
--------------------------------------------------
update mode: ON
1) output files already exist: [&#39;timeseries.h5&#39;, &#39;temporalCoherence.h5&#39;, &#39;numInvIfgram.h5&#39;].
2) output dataset is newer than input dataset: unwrapPhase.
3) all key configuration parameters are the same: [&#39;obsDatasetName&#39;, &#39;numIfgram&#39;, &#39;weightFunc&#39;, &#39;maskDataset&#39;, &#39;maskThreshold&#39;, &#39;minRedundancy&#39;, &#39;minNormVelocity&#39;].
run or skip: skip.
Input data seems to be geocoded. Lookup file not needed.

generate_mask.py /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/temporalCoherence.h5 -m 0.7 -o /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/maskTempCoh.h5
update mode: ON
1) output file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/maskTempCoh.h5 already exists and newer than input file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/temporalCoherence.h5
2) all key configuration parameters are the same: [&#39;mintpy.networkInversion.minTempCoh&#39;, &#39;mintpy.networkInversion.shadowMask&#39;]
run or skip: skip
number of reliable pixels: 3094358
Go back to directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy

################################################
   Normal end of smallbaselineApp processing!
################################################
Time used: 00 mins 0.7 secs
</pre></div>
</div>
</div>
</div>
<p>The timeseries file contains three datasets:</p>
<ul class="simple">
<li><p>the “time-series” which is the interferometric range change for each acquisition relative to the reference acquisition,</p></li>
<li><p>the “date” dataset which contains the acquisition date for each acquisition,</p></li>
<li><p>the “bperp” dataset which contains the timeseries of the perpendicular baseline.</p></li>
</ul>
</section>
<section id="estimating-the-long-term-velocity-rate">
<h2>2.5. Estimating the long-term velocity rate<a class="headerlink" href="#estimating-the-long-term-velocity-rate" title="Permalink to this heading">#</a></h2>
<p>The ground deformation caused by many geophysical or anthropogenic processes are linear at first order approximation. Therefore it is common to estimate the rate of the ground deformation which is the slope of linear fit to the time-series.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;smallbaselineApp.py &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; --dostep velocity&#39;</span>
<span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#!smallbaselineApp.py Central_Valley.cfg  --dostep velocity</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MintPy version 1.5.1, date 2023-01-03
--RUN-at-2024-01-17 22:56:31.543480--
Current directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy
Run routine processing with smallbaselineApp.py on steps: [&#39;velocity&#39;]
Remaining steps: [&#39;geocode&#39;, &#39;google_earth&#39;, &#39;hdfeos5&#39;]
--------------------------------------------------
Project name: Central_Valley
Go to work directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy
read custom template file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/Central_Valley.cfg
update default template based on input custom template
No new option value found, skip updating /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg
read default template file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg


******************** step - velocity ********************

timeseries2velocity.py /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/timeseries.h5 -t /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg -o /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5 --update
read options from template file: smallbaselineApp.cfg
update mode: ON
1) output file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5 already exists.
2) output file is newer than input file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/timeseries.h5.
3) NOT all key configuration parameters are the same: [&#39;startDate&#39;, &#39;endDate&#39;, &#39;excludeDate&#39;, &#39;polynomial&#39;, &#39;periodic&#39;, &#39;stepDate&#39;, &#39;exp&#39;, &#39;log&#39;, &#39;uncertaintyQuantification&#39;, &#39;timeSeriesCovFile&#39;, &#39;bootstrapCount&#39;].
run or skip: run.
open timeseries file: timeseries.h5
exclude date: []
--------------------------------------------------
dates from input file: 31
[&#39;20180103&#39;, &#39;20180115&#39;, &#39;20180127&#39;, &#39;20180208&#39;, &#39;20180220&#39;, &#39;20180304&#39;, &#39;20180316&#39;, &#39;20180328&#39;, &#39;20180409&#39;, &#39;20180421&#39;, &#39;20180503&#39;, &#39;20180515&#39;, &#39;20180527&#39;, &#39;20180608&#39;, &#39;20180620&#39;, &#39;20180702&#39;, &#39;20180714&#39;, &#39;20180807&#39;, &#39;20180819&#39;, &#39;20180831&#39;, &#39;20180912&#39;, &#39;20180924&#39;, &#39;20181006&#39;, &#39;20181018&#39;, &#39;20181030&#39;, &#39;20181111&#39;, &#39;20181117&#39;, &#39;20181123&#39;, &#39;20181205&#39;, &#39;20181217&#39;, &#39;20181229&#39;]
--------------------------------------------------
using all dates to calculate the time function
--------------------------------------------------
estimate deformation model with the following assumed time functions:
    polynomial : 1
    periodic   : []
    stepDate   : []
    exp        : {}
    log        : {}
add/update the following configuration metadata:
[&#39;startDate&#39;, &#39;endDate&#39;, &#39;excludeDate&#39;, &#39;polynomial&#39;, &#39;periodic&#39;, &#39;stepDate&#39;, &#39;exp&#39;, &#39;log&#39;, &#39;uncertaintyQuantification&#39;, &#39;timeSeriesCovFile&#39;, &#39;bootstrapCount&#39;]
--------------------------------------------------
create HDF5 file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5 with w mode
create dataset  : intercept    of &lt;class &#39;numpy.float32&#39;&gt;   in size of (1177, 3061)         with compression = None
create dataset  : interceptStd of &lt;class &#39;numpy.float32&#39;&gt;   in size of (1177, 3061)         with compression = None
create dataset  : velocity     of &lt;class &#39;numpy.float32&#39;&gt;   in size of (1177, 3061)         with compression = None
create dataset  : velocityStd  of &lt;class &#39;numpy.float32&#39;&gt;   in size of (1177, 3061)         with compression = None
create dataset  : residue      of &lt;class &#39;numpy.float32&#39;&gt;   in size of (1177, 3061)         with compression = None
add /intercept    attribute: UNIT = m
add /interceptStd attribute: UNIT = m
add /velocity     attribute: UNIT = m/year
add /velocityStd  attribute: UNIT = m/year
add /residue      attribute: UNIT = m
close  HDF5 file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5
reading data from file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/timeseries.h5 ...
skip pixels with zero/nan value in all acquisitions
number of pixels to invert: 3598560 out of 3602797 (99.9%)
estimating time functions via linalg.lstsq ...
estimating time functions STD from time-series fitting residual ...
--------------------------------------------------
open  HDF5 file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5 in a mode
writing dataset /intercept                 block: [0, 1177, 0, 3061]
close HDF5 file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5.
--------------------------------------------------
open  HDF5 file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5 in a mode
writing dataset /interceptStd              block: [0, 1177, 0, 3061]
close HDF5 file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5.
--------------------------------------------------
open  HDF5 file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5 in a mode
writing dataset /velocity                  block: [0, 1177, 0, 3061]
close HDF5 file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5.
--------------------------------------------------
open  HDF5 file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5 in a mode
writing dataset /velocityStd               block: [0, 1177, 0, 3061]
close HDF5 file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5.
--------------------------------------------------
open  HDF5 file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5 in a mode
writing dataset /residue                   block: [0, 1177, 0, 3061]
close HDF5 file /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5.
time used: 00 mins 4.9 secs.
Go back to directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy

################################################
   Normal end of smallbaselineApp processing!
################################################
Time used: 00 mins 4.9 secs
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scp_args</span> <span class="o">=</span> <span class="s1">&#39;velocity.h5 velocity -v -30 30&#39;</span>
<span class="n">view</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">scp_args</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>run view.py in MintPy version 1.5.1, date 2023-01-03
input file is velocity file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5 in float32 format
file size in y/x: (1177, 3061)
input dataset: &quot;[&#39;velocity&#39;]&quot;
turning glob search OFF for velocity file
num of datasets in file velocity.h5: 5
datasets to exclude (0):
[]
datasets to display (1):
[&#39;velocity&#39;]
data   coverage in y/x: (0, 0, 3061, 1177)
subset coverage in y/x: (0, 0, 3061, 1177)
data   coverage in lat/lon: (-120.610416667, 36.75125, -118.059584354, 35.770417059)
subset coverage in lat/lon: (-120.610416667, 36.75125, -118.059584354, 35.770417059)
------------------------------------------------------------------------
colormap: jet
figure title: velocity
figure size : [10.00, 3.08]
read mask from file: maskTempCoh.h5
reading data ...
masking data
data    range: [-33.016975, 5.941] cm/year
display range: [-30.0, 30.0] cm/year
display data in transparency: 1.0
plot in geo-coordinate
plotting image ...
plot scale bar: [0.2, 0.2, 0.1]
plot reference point
showing ...
</pre></div>
</div>
<img alt="../_images/eef67d3fb485601413399bd6afc60fcb368c9e4fcaa584a59a37ff776a02baa0.png" src="../_images/eef67d3fb485601413399bd6afc60fcb368c9e4fcaa584a59a37ff776a02baa0.png" />
</div>
</div>
<div class="alert alert-info">
<b>Note :</b> 
Negative values indicates that target is moving away from the radar (i.e., Subsidence in case of vertical deformation).
Positive values indicates that target is moving towards the radar (i.e., uplift in case of vertical deformation). 
    The line of sight (LOS) for this descending Sentinel-1 track is up and east from ground to radar.
</div><p>Obvious features in the estimated velocity map:</p>
<ol class="arabic simple">
<li><p>We use a color scale for this velocity with a range of +/-30 cm/year due to the rapid subsidence velocity in this area.</p></li>
<li><p>The negative LOS feature near the city of Corcoran (center left of map) is rapid subsidence due to groundwater extraction in the central part of the San Joaquin Valley, moving down and away from the radar satellite.</p></li>
<li><p>The block box at 36.63N, 119.26W is the reference pixel for this map, in a more stable part of the Central Valley.</p></li>
<li><p>Most of the map is a green color as it is close to zero displacement with the large color scale.</p></li>
</ol>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="error-analysis-what-is-signal-what-is-noise">
<h1>3. Error analysis (what is signal, what is noise!)<a class="headerlink" href="#error-analysis-what-is-signal-what-is-noise" title="Permalink to this heading">#</a></h1>
<p>Uncertainty of the ground displacement products derived from InSAR time-series, depends on the quality of the inversion of the stack of interferograms and the accuracy in separating the ground displacement from other components of the InSAR data. Therefore the definition of signal vs noise is different at the two main steps in mintpy:</p>
<ol class="arabic simple">
<li><p>During the inversion:
At this step all systematic components of the interferometric phase (e.g., ground displacement, propagation delay, geometrical residuals caused by DEM or platform’s orbit inaccuracy) are considered signal, while the interferometric phase decorrelation, phase unwrapping error and phase inconsistency are considered noise.</p></li>
<li><p>After inversion: the ground displacement component of the time-serieses is signal, and everything else (including the propagation delay and geometrical residuals) are considered noise</p></li>
</ol>
<p>Therefore we first discuss the possible sources of error during the inversion and the existing ways in MintPy to evaluate the quality of inversion and to improve the uncertainty of the inversion. Afterwards we explain the different components of the time-series and the different processing steps in MintPy to separate them from ground displacement signal.</p>
<section id="quality-of-the-inversion">
<h2>3.1 Quality of the inversion<a class="headerlink" href="#quality-of-the-inversion" title="Permalink to this heading">#</a></h2>
<p>The main sources of noise during the time-series inversion includes decorrelation, phase unwrapping error and the inconsistency of triplets of interferofgrams. Here we mainly focus on the decorrelation and unwrapping errors. We first show the existing quantities in MintPy to evaluate decorrelation and unwrapping errors and then discuss the existing ways in MintPy to reduce the decorrelation and unwrapping errors on the time-series inversion.</p>
<section id="average-spatial-coherence">
<h3>3.1.1 Average spatial coherence<a class="headerlink" href="#average-spatial-coherence" title="Permalink to this heading">#</a></h3>
<p>Mintpy computes temporal average of spatial coherence of the entire stack as a potential ancillary measure to choose reliable pixels after time-series inversion.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">view</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s1">&#39;avgSpatialCoh.h5&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>run view.py in MintPy version 1.5.1, date 2023-01-03
input file is coherence file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/avgSpatialCoh.h5 in float32 format
file size in y/x: (1177, 3061)
num of datasets in file avgSpatialCoh.h5: 1
datasets to exclude (0):
[]
datasets to display (1):
[&#39;coherence&#39;]
data   coverage in y/x: (0, 0, 3061, 1177)
subset coverage in y/x: (0, 0, 3061, 1177)
data   coverage in lat/lon: (-120.610416667, 36.75125, -118.059584354, 35.770417059)
subset coverage in lat/lon: (-120.610416667, 36.75125, -118.059584354, 35.770417059)
------------------------------------------------------------------------
colormap: gray
figure title: avgSpatialCoh
figure size : [10.00, 3.08]
reading data ...
data    range: [0.0076670763, 0.99966854] 1
display range: [0.0, 1.0] 1
display data in transparency: 1.0
plot in geo-coordinate
plotting image ...
plot scale bar: [0.2, 0.2, 0.1]
showing ...
</pre></div>
</div>
<img alt="../_images/d570ed9427909d11dfaa1413291f6bfd2a86f52215db16cd5504c09c5265dc46.png" src="../_images/d570ed9427909d11dfaa1413291f6bfd2a86f52215db16cd5504c09c5265dc46.png" />
</div>
</div>
</section>
<section id="temporal-coherence">
<h3>3.1.2 Temporal coherence<a class="headerlink" href="#temporal-coherence" title="Permalink to this heading">#</a></h3>
<p>In addition to timeseries.h5 which contains the time-series dataset, invert_network produces other quantities, which contain metrics to evaluate the quality of the inversion including temporalCoherence.h5. Temporal coherence represents the consistency of the timeseries with the network of interferograms.</p>
<p>Temporal coherence varies from 0 to 1. Pixels with values closer to 1 are considered reliable and pixels with values closer to zero are considered unreliable. For a dense network of interferograms, a threshold of 0.7 may be used (Yunjun et al, 2019).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">view</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s1">&#39;temporalCoherence.h5&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>run view.py in MintPy version 1.5.1, date 2023-01-03
input file is temporalCoherence file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/temporalCoherence.h5 in float32 format
file size in y/x: (1177, 3061)
num of datasets in file temporalCoherence.h5: 1
datasets to exclude (0):
[]
datasets to display (1):
[&#39;temporalCoherence&#39;]
data   coverage in y/x: (0, 0, 3061, 1177)
subset coverage in y/x: (0, 0, 3061, 1177)
data   coverage in lat/lon: (-120.610416667, 36.75125, -118.059584354, 35.770417059)
subset coverage in lat/lon: (-120.610416667, 36.75125, -118.059584354, 35.770417059)
------------------------------------------------------------------------
colormap: gray
figure title: temporalCoherence
figure size : [10.00, 3.08]
reading data ...
data    range: [0.0, 1.0] 1
display range: [0.0, 1.0] 1
display data in transparency: 1.0
plot in geo-coordinate
plotting image ...
plot scale bar: [0.2, 0.2, 0.1]
plot reference point
showing ...
</pre></div>
</div>
<img alt="../_images/ba28c6050ae2fe4f952974b4cc04f0854d57a99f4484b5ba2fb1d0e91f15450d.png" src="../_images/ba28c6050ae2fe4f952974b4cc04f0854d57a99f4484b5ba2fb1d0e91f15450d.png" />
</div>
</div>
<p>With both the spatial coherence and temporal coherence, we can see that the InSAR in the area of the Sierra Nevada (east of about 119W has unstable phase, and the InSAR measurements there will be low quality. There is also an area of low coherence in the low-elevation Tulare Lake bed near 119.6W, 36.0N, where the land changes a lot during the year. A much larger area flooded in the spring of 2023 when heavy rains caused high river flows that drained into the lake.</p>
<p>The velocity maps have a mask based on the temporal coherence so those low coherence areas are white.</p>
</section>
</section>
<section id="velocity-error-analysis">
<h2>3.2. Velocity error analysis<a class="headerlink" href="#velocity-error-analysis" title="Permalink to this heading">#</a></h2>
<p>The estimated velocity also comes with an expression of unecrtainty which is simply based on the goodness of fit while fitting a linear model to the time-series. This quantity is saved in “velocity.h5” under the velocityStd dataset.</p>
<p><strong>Mintpy supports additional corrections in its processing not included in this demo:</strong></p>
<ul class="simple">
<li><p>Unwrapping error correction</p></li>
<li><p>Tropospheric delay correction</p></li>
<li><p>deramping</p></li>
<li><p>Topographic residual correction</p></li>
<li><p>Residual RMS for noise evaluation</p></li>
<li><p>Changing the reference date</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scp_args</span> <span class="o">=</span> <span class="s1">&#39;velocity.h5 velocityStd -v 0 1.5&#39;</span>
<span class="n">view</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">scp_args</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>run view.py in MintPy version 1.5.1, date 2023-01-03
input file is velocity file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5 in float32 format
file size in y/x: (1177, 3061)
input dataset: &quot;[&#39;velocityStd&#39;]&quot;
turning glob search OFF for velocity file
num of datasets in file velocity.h5: 5
datasets to exclude (0):
[]
datasets to display (1):
[&#39;velocityStd&#39;]
data   coverage in y/x: (0, 0, 3061, 1177)
subset coverage in y/x: (0, 0, 3061, 1177)
data   coverage in lat/lon: (-120.610416667, 36.75125, -118.059584354, 35.770417059)
subset coverage in lat/lon: (-120.610416667, 36.75125, -118.059584354, 35.770417059)
------------------------------------------------------------------------
colormap: jet
figure title: velocityStd
figure size : [10.00, 3.08]
read mask from file: maskTempCoh.h5
reading data ...
masking data
data    range: [0.0, 2.4815676] cm/year
display range: [0.0, 1.5] cm/year
display data in transparency: 1.0
plot in geo-coordinate
plotting image ...
plot scale bar: [0.2, 0.2, 0.1]
plot reference point
showing ...
</pre></div>
</div>
<img alt="../_images/79d688c397514a089857ad40a576abb89933e1d8e91f0bb7819c4bfc96e88380.png" src="../_images/79d688c397514a089857ad40a576abb89933e1d8e91f0bb7819c4bfc96e88380.png" />
</div>
</div>
<p>Note that the plot above is the velocity error, not the velocity. The errors generally increase with distance from the reference point and also increase for points with elevations different from the reference point because of topographically correlated water vapor variations that are especially strong in this area. Variations of the ground subsidence away from a linear trend in time also cause an increase in the standard deviation of the velocity, so the strong seasonal variation in subsidence causes larger standard deviations in the subsidence bowl.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="plotting-a-subsidence-transect">
<h1>4. Plotting a Subsidence Transect<a class="headerlink" href="#plotting-a-subsidence-transect" title="Permalink to this heading">#</a></h1>
<p>In the next cell, we take a profile or transect through the subsidence signal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scp_args</span> <span class="o">=</span> <span class="s1">&#39;velocity.h5 --start-lalo 35.8 -119.8 --end-lalo 36.5 -118.9 &#39;</span>
<span class="n">plot_transection</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">scp_args</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>run view.py in MintPy version 1.5.1, date 2023-01-03
input file is velocity file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5 in float32 format
file size in y/x: (1177, 3061)
input dataset: &quot;[&#39;velocity&#39;]&quot;
turning glob search OFF for velocity file
num of datasets in file velocity.h5: 5
datasets to exclude (0):
[]
datasets to display (1):
[&#39;velocity&#39;]
data   coverage in y/x: (0, 0, 3061, 1177)
subset coverage in y/x: (0, 0, 3061, 1177)
data   coverage in lat/lon: (-120.610416667, 36.75125, -118.059584354, 35.770417059)
subset coverage in lat/lon: (-120.610416667, 36.75125, -118.059584354, 35.770417059)
------------------------------------------------------------------------
colormap: jet
figure title: velocity
figure size : [10.00, 3.08]
read mask from file: maskTempCoh.h5
data    range: [-33.016975, 5.941] cm/year
display range: [-33.016975, 5.941] cm/year
figure size : [10.00, 3.08]
display data in transparency: 1.0
plot in geo-coordinate
plotting image ...
plot scale bar: [0.2, 0.2, 0.1]
plot reference point
showing ...
</pre></div>
</div>
<img alt="../_images/2717998df1b092e2d372fa10f10913bd2f86dd0fa034d3fc97a7b378e5e01190.png" src="../_images/2717998df1b092e2d372fa10f10913bd2f86dd0fa034d3fc97a7b378e5e01190.png" />
</div>
</div>
<p>On this transect, the subsidence has an average velocity over the year 2018 that reaches more than 30 cm/year in the descending track 144 radar LOS direction. By analyzing the velocity on the ascending track and combining the two LOS directions, then we could find out that the displacements are almost all vertical due to extraction of groundwater from aquifers beneath the valley.</p>
<p>If we assume the displacement is purely vertical, we can estimate the vertical component of displacement by dividing the LOS rate by the cosine of the incidence angle, or about 40 degrees for Sentinel-1. This means that the 30 cm/year LOS velocity is close to 39 cm/year vertical velocity.</p>
<section id="visualization">
<h2>5. Visualization<a class="headerlink" href="#visualization" title="Permalink to this heading">#</a></h2>
<p>All HDF5 files can be plotted using <a class="reference external" href="http://view.py">view.py</a> and/or <a class="reference external" href="http://tsview.py">tsview.py</a>.</p>
<p><a class="reference external" href="http://view.py">view.py</a>: 2D plot(s) for:
the stack of interferogram, coherence,
velocity, temporal coherence, etc
DEM, products overlaid on DEM and many more
<a class="reference external" href="http://tsview.py">tsview.py</a>: 1D time series plot
plot_transection.py: plot 1D profile along a line of a 2D matrix
plot_coherence_matrix.py: plot coherence matrix for one pixel
save_kmz.py: Google Earth points/raster for 2D displacement
save_kmz_timeseries.py: Google Earth points for 3D displacement time-series</p>
<p>The <code class="docutils literal notranslate"><span class="pre">smallbaselineApp.py</span></code> script also has a step to run the <code class="docutils literal notranslate"><span class="pre">save_kmz.py</span></code> and generate a KMZ for viewing in Google Earth:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>smallbaselineApp.py<span class="w"> </span>smallbaselineApp.cfg<span class="w"> </span>--dostep<span class="w"> </span>google_earth
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MintPy version 1.5.1, date 2023-01-03
--RUN-at-2024-01-17 22:57:00.086184--
Current directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy
Run routine processing with smallbaselineApp.py on steps: [&#39;google_earth&#39;]
Remaining steps: [&#39;hdfeos5&#39;]
--------------------------------------------------
Go to work directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy
read default template file: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/smallbaselineApp.cfg


******************** step - google_earth ********************
creating Google Earth KMZ file for geocoded velocity file: ...

save_kmz.py /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.h5 -o /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.kmz
data   coverage in y/x: (0, 0, 3061, 1177)
subset coverage in y/x: (0, 0, 3061, 1177)
update LENGTH, WIDTH, Y/XMAX
update/add SUBSET_XMIN/YMIN/XMAX/YMAX: 0/0/3061/1177
update Y/X_FIRST
update REF_Y/X
read mask from file: maskTempCoh.h5
masking out pixels with zero value in file: None
colormap: jet
plotting data ...
figure size : [20.00, 7.69]
show reference point
writing /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.png with dpi=600
writing /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity_cbar.png
writing /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.kml
remove /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.kml
remove /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.png
remove /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity_cbar.png
merged all files to /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy/velocity.kmz
Go back to directory: /home/jovyan/opensarlab_NISAR_EA_Workshop_2024_1_Recipe_Book/NISAR/work/CentralValleyA144/MintPy

################################################
   Normal end of smallbaselineApp processing!
################################################
Time used: 00 mins 5.3 secs
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="reference-material">
<h1>Reference material<a class="headerlink" href="#reference-material" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p>Original MintPy Notebook withe detailed description by Yunjun and Fattahi at: <a class="reference external" href="https://nbviewer.jupyter.org/github/insarlab/MintPy-tutorial/blob/master/smallbaselineApp_aria.ipynb">https://nbviewer.jupyter.org/github/insarlab/MintPy-tutorial/blob/master/smallbaselineApp_aria.ipynb</a></p></li>
<li><p>Mintpy reference: <em>Yunjun, Z., H. Fattahi, F. Amelung (2019), Small baseline InSAR time series analysis: unwrapping error correction and noise reduction, preprint doi:<a class="reference external" href="https://eartharxiv.org/9sz6m/">10.31223/osf.io/9sz6m</a>.</em></p></li>
<li><p>MintPy published reference: <em>Yunjun, Z., H. Fattahi, and F. Amelung (2019), Small baseline InSAR time series analysis: Unwrapping error correction and noise reduction, Computers &amp; Geosciences, 133, 104331, doi:10.1016/j.cageo.2019.104331.</em></p></li>
<li><p>University of Miami online time-series viewer: <a class="reference external" href="https://insarmaps.miami.edu/">https://insarmaps.miami.edu/</a></p></li>
<li><p>Mintpy Github repository: <a class="github reference external" href="https://github.com/insarlab/MintPy">insarlab/MintPy</a></p></li>
<li><p>ARIA-tools Github Repository: <a class="github reference external" href="https://github.com/aria-tools/ARIA-tools">aria-tools/ARIA-tools</a></p></li>
</ul>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "conda-env-.local-NISAR_EA_Workshop_2024_1-py"
        },
        kernelOptions: {
            name: "conda-env-.local-NISAR_EA_Workshop_2024_1-py",
            path: "./NISAR"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'conda-env-.local-NISAR_EA_Workshop_2024_1-py'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="NISAR_sample_data.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">NISAR Sample Data Notebook</p>
      </div>
    </a>
    <a class="right-next"
       href="../OPERA/OPERA_resources.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">OPERA Resources</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">ARIA GUNW (NISAR-like) Data: InSAR Time Series Analysis with MintPy Notebook</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mapping-subsidence-in-the-california-central-valley-with-insar-time-series">Mapping Subsidence in the California Central Valley with InSAR time series</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#notebook-setup">0. Notebook setup</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#smallbaselineapp-py-overview">1. smallbaselineApp.py overview</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#processing-steps-of-smallbaselineapp-py">1.1 Processing steps of smallbaselineApp.py</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-processing-parameters">1.2 Configuring processing parameters</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#small-baseline-time-series-analysis">2. Small Baseline Time Series Analysis</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-aria-data-into-mintpy">2.1. Loading ARIA data into MintPy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-the-interferogram-network">2.2. Plotting the interferogram network</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mask-generation">2.3.  Mask generation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reference-point">reference_point</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inverting-of-the-small-baseline-network">2.4. Inverting of the Small Baseline network</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#estimating-the-long-term-velocity-rate">2.5. Estimating the long-term velocity rate</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#error-analysis-what-is-signal-what-is-noise">3. Error analysis (what is signal, what is noise!)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quality-of-the-inversion">3.1 Quality of the inversion</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#average-spatial-coherence">3.1.1 Average spatial coherence</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#temporal-coherence">3.1.2 Temporal coherence</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velocity-error-analysis">3.2. Velocity error analysis</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-a-subsidence-transect">4. Plotting a Subsidence Transect</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization">5. Visualization</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#reference-material">Reference material</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Alaska Satellite Facility
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>